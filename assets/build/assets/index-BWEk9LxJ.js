var Fe=t=>{throw TypeError(t)};var Qe=(t,e,s)=>e.has(t)||Fe("Cannot "+s);var i=(t,e,s)=>(Qe(t,e,"read from private field"),s?s.call(t):e.get(t)),f=(t,e,s)=>e.has(t)?Fe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),c=(t,e,s,r)=>(Qe(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),P=(t,e,s)=>(Qe(t,e,"access private method"),s);var pe=(t,e,s,r)=>({set _(a){c(t,e,a,s)},get _(){return i(t,e,r)}});import{r as w}from"./charts-wlAe7WTx.js";import{t as it,n as x,e as at,a as nt,b as Ye,c as Ze,Q as Pe,R as ut,d as ot,f as Q,S as Oe,m as xe,s as $e,h as ve,r as Ve,g as We,i as ht,j as Ke,k as ct,o as ke,l as Ie,p as lt,q as Te,v as dt,w as V,x as ft,y as yt,z as pt,A as gt,B as mt,C as He,D as je,E as vt,F as bt,G as qe,H as Ae,I as Pt}from"./useQuery-BuohUMvy.js";import{N as ns,J as us,K as os,L as hs,M as cs,O as ls,P as ds,T as fs,U as ys,V as ps,u as gs}from"./useQuery-BuohUMvy.js";function et(t){return t}function Ot(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function Qt(t,e,s){const r=()=>{var n;const a=(n=t.promise)==null?void 0:n.then(e).catch(u=>s(u)?Promise.reject(new Error("redacted")):Promise.reject(u));return a==null||a.catch(x),a};return{dehydratedAt:Date.now(),state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:r()},...t.meta&&{meta:t.meta}}}function wt(t){return t.state.isPaused}function Ct(t){return t.state.status==="success"}function Rt(t){return!0}function jt(t,e={}){var d,g,y,o;const s=e.shouldDehydrateMutation??((d=t.getDefaultOptions().dehydrate)==null?void 0:d.shouldDehydrateMutation)??wt,r=t.getMutationCache().getAll().flatMap(h=>s(h)?[Ot(h)]:[]),a=e.shouldDehydrateQuery??((g=t.getDefaultOptions().dehydrate)==null?void 0:g.shouldDehydrateQuery)??Ct,n=e.shouldRedactErrors??((y=t.getDefaultOptions().dehydrate)==null?void 0:y.shouldRedactErrors)??Rt,u=e.serializeData??((o=t.getDefaultOptions().dehydrate)==null?void 0:o.serializeData)??et,l=t.getQueryCache().getAll().flatMap(h=>a(h)?[Qt(h,u,n)]:[]);return{mutations:r,queries:l}}function Ne(t,e,s){var d,g;if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),a=t.getQueryCache(),n=((d=s==null?void 0:s.defaultOptions)==null?void 0:d.deserializeData)??((g=t.getDefaultOptions().hydrate)==null?void 0:g.deserializeData)??et,u=e.mutations||[],l=e.queries||[];u.forEach(({state:y,...o})=>{var h,m;r.build(t,{...(h=t.getDefaultOptions().hydrate)==null?void 0:h.mutations,...(m=s==null?void 0:s.defaultOptions)==null?void 0:m.mutations,...o},y)}),l.forEach(({queryKey:y,state:o,queryHash:h,meta:m,promise:M,dehydratedAt:p})=>{var _,W;const b=M?it(M):void 0,R=o.data===void 0?b==null?void 0:b.data:o.data,K=R===void 0?R:n(R);let v=a.get(h);const A=(v==null?void 0:v.state.status)==="pending",T=(v==null?void 0:v.state.fetchStatus)==="fetching";if(v){const te=b&&p!==void 0&&p>v.state.dataUpdatedAt;if(o.dataUpdatedAt>v.state.dataUpdatedAt||te){const{fetchStatus:se,...C}=o;v.setState({...C,data:K})}}else v=a.build(t,{...(_=t.getDefaultOptions().hydrate)==null?void 0:_.queries,...(W=s==null?void 0:s.defaultOptions)==null?void 0:W.queries,queryKey:y,queryHash:h,meta:m},{...o,data:K,fetchStatus:"idle",status:K!==void 0?"success":o.status});M&&!A&&!T&&(p===void 0||p>v.state.dataUpdatedAt)&&v.fetch(void 0,{initialPromise:Promise.resolve(M).then(n)}).catch(x)})}function be(t){return{onFetch:(e,s)=>{var y,o,h,m,M;const r=e.options,a=(h=(o=(y=e.fetchOptions)==null?void 0:y.meta)==null?void 0:o.fetchMore)==null?void 0:h.direction,n=((m=e.state.data)==null?void 0:m.pages)||[],u=((M=e.state.data)==null?void 0:M.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const g=async()=>{let p=!1;const b=v=>{Ze(v,()=>e.signal,()=>p=!0)},R=at(e.options,e.fetchOptions),K=async(v,A,T)=>{if(p)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const W=(()=>{const S={client:e.client,queryKey:e.queryKey,pageParam:A,direction:T?"backward":"forward",meta:e.options.meta};return b(S),S})(),te=await R(W),{maxPages:se}=e.options,C=T?nt:Ye;return{pages:C(v.pages,te,se),pageParams:C(v.pageParams,A,se)}};if(a&&n.length){const v=a==="backward",A=v?tt:we,T={pages:n,pageParams:u},_=A(r,T);l=await K(T,_,v)}else{const v=t??n.length;do{const A=d===0?u[0]??r.initialPageParam:we(r,l);if(d>0&&A==null)break;l=await K(l,A),d++}while(d<v)}return l};e.options.persister?e.fetchFn=()=>{var p,b;return(b=(p=e.options).persister)==null?void 0:b.call(p,g,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=g}}}function we(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function tt(t,{pages:e,pageParams:s}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s):void 0}function Mt(t,e){return e?we(t,e)!=null:!1}function Et(t,e){return!e||!t.getPreviousPageParam?!1:tt(t,e)!=null}var st=class extends Pe{constructor(t,e){super(t,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t){super.setOptions({...t,behavior:be()})}getOptimisticResult(t){return t.behavior=be(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,e){var M,p;const{state:s}=t,r=super.createResult(t,e),{isFetching:a,isRefetching:n,isError:u,isRefetchError:l}=r,d=(p=(M=s.fetchMeta)==null?void 0:M.fetchMore)==null?void 0:p.direction,g=u&&d==="forward",y=a&&d==="forward",o=u&&d==="backward",h=a&&d==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Mt(e,s.data),hasPreviousPage:Et(e,s.data),isFetchNextPageError:g,isFetchingNextPage:y,isFetchPreviousPageError:o,isFetchingPreviousPage:h,isRefetchError:l&&!g&&!o,isRefetching:n&&!y&&!h}}},ce,H,D,ee,j,G,ze,St=(ze=class extends ut{constructor(e){super();f(this,j);f(this,ce);f(this,H);f(this,D);f(this,ee);c(this,ce,e.client),this.mutationId=e.mutationId,c(this,D,e.mutationCache),c(this,H,[]),this.state=e.state||rt(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){i(this,H).includes(e)||(i(this,H).push(e),this.clearGcTimeout(),i(this,D).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){c(this,H,i(this,H).filter(s=>s!==e)),this.scheduleGc(),i(this,D).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){i(this,H).length||(this.state.status==="pending"?this.scheduleGc():i(this,D).remove(this))}continue(){var e;return((e=i(this,ee))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var u,l,d,g,y,o,h,m,M,p,b,R,K,v,A,T,_,W,te,se;const s=()=>{P(this,j,G).call(this,{type:"continue"})},r={client:i(this,ce),meta:this.options.meta,mutationKey:this.options.mutationKey};c(this,ee,ot({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(C,S)=>{P(this,j,G).call(this,{type:"failed",failureCount:C,error:S})},onPause:()=>{P(this,j,G).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>i(this,D).canRun(this)}));const a=this.state.status==="pending",n=!i(this,ee).canStart();try{if(a)s();else{P(this,j,G).call(this,{type:"pending",variables:e,isPaused:n}),await((l=(u=i(this,D).config).onMutate)==null?void 0:l.call(u,e,this,r));const S=await((g=(d=this.options).onMutate)==null?void 0:g.call(d,e,r));S!==this.state.context&&P(this,j,G).call(this,{type:"pending",context:S,variables:e,isPaused:n})}const C=await i(this,ee).start();return await((o=(y=i(this,D).config).onSuccess)==null?void 0:o.call(y,C,e,this.state.context,this,r)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,C,e,this.state.context,r)),await((p=(M=i(this,D).config).onSettled)==null?void 0:p.call(M,C,null,this.state.variables,this.state.context,this,r)),await((R=(b=this.options).onSettled)==null?void 0:R.call(b,C,null,e,this.state.context,r)),P(this,j,G).call(this,{type:"success",data:C}),C}catch(C){try{await((v=(K=i(this,D).config).onError)==null?void 0:v.call(K,C,e,this.state.context,this,r))}catch(S){Promise.reject(S)}try{await((T=(A=this.options).onError)==null?void 0:T.call(A,C,e,this.state.context,r))}catch(S){Promise.reject(S)}try{await((W=(_=i(this,D).config).onSettled)==null?void 0:W.call(_,void 0,C,this.state.variables,this.state.context,this,r))}catch(S){Promise.reject(S)}try{await((se=(te=this.options).onSettled)==null?void 0:se.call(te,void 0,C,e,this.state.context,r))}catch(S){Promise.reject(S)}throw P(this,j,G).call(this,{type:"error",error:C}),C}finally{i(this,D).runNext(this)}}},ce=new WeakMap,H=new WeakMap,D=new WeakMap,ee=new WeakMap,j=new WeakSet,G=function(e){const s=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Q.batch(()=>{i(this,H).forEach(r=>{r.onMutationUpdate(e)}),i(this,D).notify({mutation:this,type:"updated",action:e})})},ze);function rt(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var U,I,le,Le,Dt=(Le=class extends Oe{constructor(e={}){super();f(this,U);f(this,I);f(this,le);this.config=e,c(this,U,new Set),c(this,I,new Map),c(this,le,0)}build(e,s,r){const a=new St({client:e,mutationCache:this,mutationId:++pe(this,le)._,options:e.defaultMutationOptions(s),state:r});return this.add(a),a}add(e){i(this,U).add(e);const s=ge(e);if(typeof s=="string"){const r=i(this,I).get(s);r?r.push(e):i(this,I).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(i(this,U).delete(e)){const s=ge(e);if(typeof s=="string"){const r=i(this,I).get(s);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&i(this,I).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=ge(e);if(typeof s=="string"){const r=i(this,I).get(s),a=r==null?void 0:r.find(n=>n.state.status==="pending");return!a||a===e}else return!0}runNext(e){var r;const s=ge(e);if(typeof s=="string"){const a=(r=i(this,I).get(s))==null?void 0:r.find(n=>n!==e&&n.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Q.batch(()=>{i(this,U).forEach(e=>{this.notify({type:"removed",mutation:e})}),i(this,U).clear(),i(this,I).clear()})}getAll(){return Array.from(i(this,U))}find(e){const s={exact:!0,...e};return this.getAll().find(r=>xe(s,r))}findAll(e={}){return this.getAll().filter(s=>xe(e,s))}notify(e){Q.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return Q.batch(()=>Promise.all(e.map(s=>s.continue().catch(x))))}},U=new WeakMap,I=new WeakMap,le=new WeakMap,Le);function ge(t){var e;return(e=t.options.scope)==null?void 0:e.id}var B,J,q,z,L,me,Ce,_e,qt=(_e=class extends Oe{constructor(e,s){super();f(this,L);f(this,B);f(this,J);f(this,q);f(this,z);c(this,B,e),this.setOptions(s),this.bindMethods(),P(this,L,me).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var r;const s=this.options;this.options=i(this,B).defaultMutationOptions(e),$e(this.options,s)||i(this,B).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,q),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&ve(s.mutationKey)!==ve(this.options.mutationKey)?this.reset():((r=i(this,q))==null?void 0:r.state.status)==="pending"&&i(this,q).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=i(this,q))==null||e.removeObserver(this)}onMutationUpdate(e){P(this,L,me).call(this),P(this,L,Ce).call(this,e)}getCurrentResult(){return i(this,J)}reset(){var e;(e=i(this,q))==null||e.removeObserver(this),c(this,q,void 0),P(this,L,me).call(this),P(this,L,Ce).call(this)}mutate(e,s){var r;return c(this,z,s),(r=i(this,q))==null||r.removeObserver(this),c(this,q,i(this,B).getMutationCache().build(i(this,B),this.options)),i(this,q).addObserver(this),i(this,q).execute(e)}},B=new WeakMap,J=new WeakMap,q=new WeakMap,z=new WeakMap,L=new WeakSet,me=function(){var s;const e=((s=i(this,q))==null?void 0:s.state)??rt();c(this,J,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},Ce=function(e){Q.batch(()=>{var s,r,a,n,u,l,d,g;if(i(this,z)&&this.hasListeners()){const y=i(this,J).variables,o=i(this,J).context,h={client:i(this,B),meta:this.options.meta,mutationKey:this.options.mutationKey};if((e==null?void 0:e.type)==="success"){try{(r=(s=i(this,z)).onSuccess)==null||r.call(s,e.data,y,o,h)}catch(m){Promise.reject(m)}try{(n=(a=i(this,z)).onSettled)==null||n.call(a,e.data,null,y,o,h)}catch(m){Promise.reject(m)}}else if((e==null?void 0:e.type)==="error"){try{(l=(u=i(this,z)).onError)==null||l.call(u,e.error,y,o,h)}catch(m){Promise.reject(m)}try{(g=(d=i(this,z)).onSettled)==null||g.call(d,void 0,e.error,y,o,h)}catch(m){Promise.reject(m)}}}this.listeners.forEach(y=>{y(i(this,J))})})},_e);function Ue(t,e){const s=new Set(e);return t.filter(r=>!s.has(r))}function At(t,e,s){const r=t.slice(0);return r[e]=s,r}var re,F,ie,ae,k,X,de,fe,ye,E,Re,Me,Ee,Se,De,Ge,Ft=(Ge=class extends Oe{constructor(e,s,r){super();f(this,E);f(this,re);f(this,F);f(this,ie);f(this,ae);f(this,k);f(this,X);f(this,de);f(this,fe);f(this,ye,[]);c(this,re,e),c(this,ae,r),c(this,ie,[]),c(this,k,[]),c(this,F,[]),this.setQueries(s)}onSubscribe(){this.listeners.size===1&&i(this,k).forEach(e=>{e.subscribe(s=>{P(this,E,Se).call(this,e,s)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,i(this,k).forEach(e=>{e.destroy()})}setQueries(e,s){c(this,ie,e),c(this,ae,s),Q.batch(()=>{const r=i(this,k),a=P(this,E,Ee).call(this,i(this,ie));a.forEach(o=>o.observer.setOptions(o.defaultedQueryOptions));const n=a.map(o=>o.observer),u=n.map(o=>o.getCurrentResult()),l=r.length!==n.length,d=n.some((o,h)=>o!==r[h]),g=l||d,y=g?!0:u.some((o,h)=>{const m=i(this,F)[h];return!m||!$e(o,m)});!g&&!y||(g&&(c(this,ye,a),c(this,k,n)),c(this,F,u),this.hasListeners()&&(g&&(Ue(r,n).forEach(o=>{o.destroy()}),Ue(n,r).forEach(o=>{o.subscribe(h=>{P(this,E,Se).call(this,o,h)})})),P(this,E,De).call(this)))})}getCurrentResult(){return i(this,F)}getQueries(){return i(this,k).map(e=>e.getCurrentQuery())}getObservers(){return i(this,k)}getOptimisticResult(e,s){const r=P(this,E,Ee).call(this,e),a=r.map(n=>n.observer.getOptimisticResult(n.defaultedQueryOptions));return[a,n=>P(this,E,Me).call(this,n??a,s),()=>P(this,E,Re).call(this,a,r)]}},re=new WeakMap,F=new WeakMap,ie=new WeakMap,ae=new WeakMap,k=new WeakMap,X=new WeakMap,de=new WeakMap,fe=new WeakMap,ye=new WeakMap,E=new WeakSet,Re=function(e,s){return s.map((r,a)=>{const n=e[a];return r.defaultedQueryOptions.notifyOnChangeProps?n:r.observer.trackResult(n,u=>{s.forEach(l=>{l.observer.trackProp(u)})})})},Me=function(e,s){return s?((!i(this,X)||i(this,F)!==i(this,fe)||s!==i(this,de))&&(c(this,de,s),c(this,fe,i(this,F)),c(this,X,Ve(i(this,X),s(e)))),i(this,X)):e},Ee=function(e){const s=new Map;i(this,k).forEach(a=>{const n=a.options.queryHash;if(!n)return;const u=s.get(n);u?u.push(a):s.set(n,[a])});const r=[];return e.forEach(a=>{var d;const n=i(this,re).defaultQueryOptions(a),l=((d=s.get(n.queryHash))==null?void 0:d.shift())??new Pe(i(this,re),n);r.push({defaultedQueryOptions:n,observer:l})}),r},Se=function(e,s){const r=i(this,k).indexOf(e);r!==-1&&(c(this,F,At(i(this,F),r,s)),P(this,E,De).call(this))},De=function(){var e;if(this.hasListeners()){const s=i(this,X),r=P(this,E,Re).call(this,i(this,F),i(this,ye)),a=P(this,E,Me).call(this,r,(e=i(this,ae))==null?void 0:e.combine);s!==a&&Q.batch(()=>{this.listeners.forEach(n=>{n(i(this,F))})})}},Ge),N,Je,xt=(Je=class extends Oe{constructor(e={}){super();f(this,N);this.config=e,c(this,N,new Map)}build(e,s,r){const a=s.queryKey,n=s.queryHash??We(a,s);let u=this.get(n);return u||(u=new ht({client:e,queryKey:a,queryHash:n,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(u)),u}add(e){i(this,N).has(e.queryHash)||(i(this,N).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=i(this,N).get(e.queryHash);s&&(e.destroy(),s===e&&i(this,N).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Q.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(this,N).get(e)}getAll(){return[...i(this,N).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>Ke(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>Ke(e,r)):s}notify(e){Q.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){Q.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Q.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},N=new WeakMap,Je),O,Y,Z,ne,ue,$,oe,he,Xe,Nt=(Xe=class{constructor(t={}){f(this,O);f(this,Y);f(this,Z);f(this,ne);f(this,ue);f(this,$);f(this,oe);f(this,he);c(this,O,t.queryCache||new xt),c(this,Y,t.mutationCache||new Dt),c(this,Z,t.defaultOptions||{}),c(this,ne,new Map),c(this,ue,new Map),c(this,$,0)}mount(){pe(this,$)._++,i(this,$)===1&&(c(this,oe,ct.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,O).onFocus())})),c(this,he,ke.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,O).onOnline())})))}unmount(){var t,e;pe(this,$)._--,i(this,$)===0&&((t=i(this,oe))==null||t.call(this),c(this,oe,void 0),(e=i(this,he))==null||e.call(this),c(this,he,void 0))}isFetching(t){return i(this,O).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return i(this,Y).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,O).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=i(this,O).build(this,e),r=s.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(Ie(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return i(this,O).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),a=i(this,O).get(r.queryHash),n=a==null?void 0:a.state.data,u=lt(e,n);if(u!==void 0)return i(this,O).build(this,r).setData(u,{...s,manual:!0})}setQueriesData(t,e,s){return Q.batch(()=>i(this,O).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,O).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=i(this,O);Q.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=i(this,O);return Q.batch(()=>(s.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},r=Q.batch(()=>i(this,O).findAll(t).map(a=>a.cancel(s)));return Promise.all(r).then(x).catch(x)}invalidateQueries(t,e={}){return Q.batch(()=>(i(this,O).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},r=Q.batch(()=>i(this,O).findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let n=a.fetch(void 0,s);return s.throwOnError||(n=n.catch(x)),a.state.fetchStatus==="paused"?Promise.resolve():n}));return Promise.all(r).then(x)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=i(this,O).build(this,e);return s.isStaleByTime(Ie(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(x).catch(x)}fetchInfiniteQuery(t){return t.behavior=be(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(x).catch(x)}ensureInfiniteQueryData(t){return t.behavior=be(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ke.isOnline()?i(this,Y).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(this,O)}getMutationCache(){return i(this,Y)}getDefaultOptions(){return i(this,Z)}setDefaultOptions(t){c(this,Z,t)}setQueryDefaults(t,e){i(this,ne).set(ve(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...i(this,ne).values()],s={};return e.forEach(r=>{Te(t,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(t,e){i(this,ue).set(ve(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...i(this,ue).values()],s={};return e.forEach(r=>{Te(t,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...i(this,Z).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=We(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===dt&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...i(this,Z).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){i(this,O).clear(),i(this,Y).clear()}},O=new WeakMap,Y=new WeakMap,Z=new WeakMap,ne=new WeakMap,ue=new WeakMap,$=new WeakMap,oe=new WeakMap,he=new WeakMap,Xe);function Ut({streamFn:t,refetchMode:e="reset",reducer:s=(a,n)=>Ye(a,n),initialValue:r=[]}){return async a=>{const n=a.client.getQueryCache().find({queryKey:a.queryKey,exact:!0}),u=!!n&&n.state.data!==void 0;u&&e==="reset"&&n.setState({status:"pending",data:void 0,error:null,fetchStatus:"fetching"});let l=r,d=!1;const g=Ze({client:a.client,meta:a.meta,queryKey:a.queryKey,pageParam:a.pageParam,direction:a.direction},()=>a.signal,()=>d=!0),y=await t(g),o=u&&e==="replace";for await(const h of y){if(d)break;o?l=s(l,h):a.client.setQueryData(a.queryKey,m=>s(m===void 0?r:m,h))}return o&&!d&&a.client.setQueryData(a.queryKey,l),a.client.getQueryData(a.queryKey)??r}}var Bt=Symbol("dataTagSymbol"),zt=Symbol("dataTagErrorSymbol"),Lt=Symbol("unsetMarker");function Kt({queries:t,...e},s){const r=V(s),a=ft(),n=yt(),u=w.useMemo(()=>t.map(p=>{const b=r.defaultQueryOptions(p);return b._optimisticResults=a?"isRestoring":"optimistic",b}),[t,r,a]);u.forEach(p=>{pt(p);const b=r.getQueryCache().get(p.queryHash);gt(p,n,b)}),mt(n);const[l]=w.useState(()=>new Ft(r,u,e)),[d,g,y]=l.getOptimisticResult(u,e.combine),o=!a&&e.subscribed!==!1;w.useSyncExternalStore(w.useCallback(p=>o?l.subscribe(Q.batchCalls(p)):x,[l,o]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),w.useEffect(()=>{l.setQueries(u,e)},[u,e,l]);const m=d.some((p,b)=>He(u[b],p))?d.flatMap((p,b)=>{const R=u[b];if(R){const K=new Pe(r,R);if(He(R,p))return je(R,K,n);vt(p,a)&&je(R,K,n)}return[]}):[];if(m.length>0)throw Promise.all(m);const M=d.find((p,b)=>{const R=u[b];return R&&bt({result:p,errorResetBoundary:n,throwOnError:R.throwOnError,query:r.getQueryCache().get(R.queryHash),suspense:R.suspense})});if(M!=null&&M.error)throw M.error;return g(y())}function _t(t,e){return qe({...t,enabled:!0,suspense:!0,throwOnError:Ae,placeholderData:void 0},Pe,e)}function Gt(t,e){return qe({...t,enabled:!0,suspense:!0,throwOnError:Ae},st,e)}function Jt(t,e){return Kt({...t,queries:t.queries.map(s=>({...s,suspense:!0,throwOnError:Ae,enabled:!0,placeholderData:void 0}))},e)}function Xt(t,e){const s=V(e);s.getQueryState(t.queryKey)||s.prefetchQuery(t)}function Yt(t,e){const s=V(e);s.getQueryState(t.queryKey)||s.prefetchInfiniteQuery(t)}function Zt(t){return t}function $t(t){return t}var Vt=({children:t,options:e={},state:s,queryClient:r})=>{const a=V(r),n=w.useRef(e);w.useEffect(()=>{n.current=e});const u=w.useMemo(()=>{if(s){if(typeof s!="object")return;const l=a.getQueryCache(),d=s.queries||[],g=[],y=[];for(const o of d){const h=l.get(o.queryHash);h?(o.state.dataUpdatedAt>h.state.dataUpdatedAt||o.promise&&h.state.status!=="pending"&&h.state.fetchStatus!=="fetching"&&o.dehydratedAt!==void 0&&o.dehydratedAt>h.state.dataUpdatedAt)&&y.push(o):g.push(o)}if(g.length>0&&Ne(a,{queries:g},n.current),y.length>0)return y}},[a,s]);return w.useEffect(()=>{u&&Ne(a,{queries:u},n.current)},[a,u]),t};function Wt(t,e){const s=V(e),r=s.getQueryCache();return w.useSyncExternalStore(w.useCallback(a=>r.subscribe(Q.batchCalls(a)),[r]),()=>s.isFetching(t),()=>s.isFetching(t))}function es(t,e){const s=V(e);return kt({filters:{...t,status:"pending"}},s).length}function Be(t,e){return t.findAll(e.filters).map(s=>e.select?e.select(s):s.state)}function kt(t={},e){const s=V(e).getMutationCache(),r=w.useRef(t),a=w.useRef(null);return a.current===null&&(a.current=Be(s,t)),w.useEffect(()=>{r.current=t}),w.useSyncExternalStore(w.useCallback(n=>s.subscribe(()=>{const u=Ve(a.current,Be(s,r.current));a.current!==u&&(a.current=u,Q.schedule(n))}),[s]),()=>a.current,()=>a.current)}function ts(t,e){const s=V(e),[r]=w.useState(()=>new qt(s,t));w.useEffect(()=>{r.setOptions(t)},[r,t]);const a=w.useSyncExternalStore(w.useCallback(u=>r.subscribe(Q.batchCalls(u)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),n=w.useCallback((u,l)=>{r.mutate(u,l).catch(x)},[r]);if(a.error&&Pt(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:n,mutateAsync:a.mutate}}function ss(t){return t}function rs(t,e){return qe(t,st,e)}export{ns as CancelledError,Vt as HydrationBoundary,st as InfiniteQueryObserver,us as IsRestoringProvider,St as Mutation,Dt as MutationCache,qt as MutationObserver,Ft as QueriesObserver,ht as Query,xt as QueryCache,Nt as QueryClient,os as QueryClientContext,hs as QueryClientProvider,cs as QueryErrorResetBoundary,Pe as QueryObserver,zt as dataTagErrorSymbol,Bt as dataTagSymbol,ls as defaultScheduler,wt as defaultShouldDehydrateMutation,Ct as defaultShouldDehydrateQuery,jt as dehydrate,Ut as experimental_streamedQuery,ct as focusManager,ve as hashKey,Ne as hydrate,$t as infiniteQueryOptions,ds as isCancelledError,fs as isServer,ys as keepPreviousData,xe as matchMutation,Ke as matchQuery,ss as mutationOptions,x as noop,Q as notifyManager,ke as onlineManager,Te as partialMatchKey,Zt as queryOptions,Ve as replaceEqualDeep,Pt as shouldThrowError,dt as skipToken,ps as timeoutManager,Lt as unsetMarker,rs as useInfiniteQuery,Wt as useIsFetching,es as useIsMutating,ft as useIsRestoring,ts as useMutation,kt as useMutationState,Yt as usePrefetchInfiniteQuery,Xt as usePrefetchQuery,Kt as useQueries,gs as useQuery,V as useQueryClient,yt as useQueryErrorResetBoundary,Gt as useSuspenseInfiniteQuery,Jt as useSuspenseQueries,_t as useSuspenseQuery};
