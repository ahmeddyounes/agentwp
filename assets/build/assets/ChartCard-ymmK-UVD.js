import{r as o,j as t,D as F,B as ee,L as A,C as te,a as re,b as ae,P as se,d as ne,e as oe,A as ie,p as le,f as ce,h as de}from"./charts-wlAe7WTx.js";import{B as ue}from"./ErrorBoundary-C7nwgbtY.js";import"./index-BYW1KCf_.js";te.register(re,ae,se,ne,oe,ie,le,ce,de);const pe=()=>t.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20","aria-hidden":"true",focusable:"false",children:t.jsx("path",{fill:"currentColor",d:"M4.8 20.2a1 1 0 0 1-1-1V4.8a1 1 0 0 1 2 0v13.4h13.4a1 1 0 0 1 0 2H4.8zm4.2-4.9 3-4.2a1 1 0 0 1 1.6-.1l2 2.6 3-4a1 1 0 0 1 1.6 1.2l-3.8 5a1 1 0 0 1-1.6 0l-2.1-2.7-2.2 3.1a1 1 0 1 1-1.5-.9z"})}),ge={line:A,bar:ee,doughnut:F},me=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}),fe=a=>typeof a!="number"||Number.isNaN(a)?(a==null?void 0:a.toString())??"":me.format(a),he=a=>{const c=a.parsed;if(typeof c=="number")return c;if(c&&typeof c=="object"){const i=c;if(i.y!==void 0)return i.y;if(i.r!==void 0)return i.r}return a.raw},xe=(a=!1)=>{const[c,i]=o.useState(()=>typeof window>"u"||!window.matchMedia?a:window.matchMedia("(prefers-color-scheme: dark)").matches);return o.useEffect(()=>{if(!window.matchMedia)return;const l=window.matchMedia("(prefers-color-scheme: dark)"),p=h=>{i(h.matches)};return l.addEventListener?l.addEventListener("change",p):l.addListener(p),()=>{l.removeEventListener?l.removeEventListener("change",p):l.removeListener(p)}},[]),c},be=a=>a==="light"?{text:"#0f172a",muted:"#475569",grid:"rgba(148, 163, 184, 0.35)",tooltipBg:"#ffffff",tooltipBorder:"rgba(148, 163, 184, 0.6)",tooltipText:"#0f172a",canvas:"#f1f5f9"}:{text:"#e2e8f0",muted:"#94a3b8",grid:"rgba(148, 163, 184, 0.2)",tooltipBg:"#0f172a",tooltipBorder:"rgba(148, 163, 184, 0.4)",tooltipText:"#e2e8f0",canvas:"#111827"};function ve({title:a="Performance snapshot",subtitle:c,metric:i,trend:l,footer:p,theme:h="auto",type:w="line",data:U,options:s,meta:v,table:g,height:G=220,exportFilename:H="agentwp-chart.png",exportLabel:V="Export PNG",valueFormatter:x=fe,yAxisFormatter:C,className:W=""}){const Q=xe(),y=h==="auto"?Q?"dark":"light":h,n=o.useMemo(()=>be(y),[y]),q=ge[w]||A,j=o.useRef(null),m=o.useRef(null),[f,b]=o.useState("idle"),k=o.useId(),J=o.useId();o.useEffect(()=>()=>{m.current&&window.clearTimeout(m.current)},[]);const K=o.useMemo(()=>[{id:"agentwpChartBackground",beforeDraw:r=>{if(!r||typeof r!="object")return;const{ctx:e,width:d,height:u}=r;!e||typeof d!="number"||typeof u!="number"||(e.save(),e.fillStyle=n.canvas,e.fillRect(0,0,d,u),e.restore())}}],[n.canvas]),_=o.useMemo(()=>({label:r=>{var u;const e=(u=r.dataset)!=null&&u.label?`${r.dataset.label}: `:"",d=he(r);return`${e}${x(d)}`}}),[x]),X=o.useMemo(()=>{var d,u,E,N,B,S,T,L,M,P,D,R,O,$,I,z;const r=w!=="doughnut",e={responsive:!0,maintainAspectRatio:!1,devicePixelRatio:2,animation:{duration:280,easing:"easeOutQuart"},interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:n.text,font:{family:'"Space Grotesk", "Manrope", system-ui, sans-serif',size:11,weight:500},usePointStyle:!0,boxWidth:8}},tooltip:{backgroundColor:n.tooltipBg,borderColor:n.tooltipBorder,borderWidth:1,titleColor:n.tooltipText,bodyColor:n.tooltipText,callbacks:_}},scales:r?{x:{ticks:{color:n.muted},grid:{color:n.grid}},y:{ticks:{color:n.muted,callback:C||x},grid:{color:n.grid}}}:void 0};return s?{...e,...s,plugins:{...e.plugins,...s.plugins,legend:{...(d=e.plugins)==null?void 0:d.legend,...(u=s.plugins)==null?void 0:u.legend,labels:{...(N=(E=e.plugins)==null?void 0:E.legend)==null?void 0:N.labels,...(S=(B=s.plugins)==null?void 0:B.legend)==null?void 0:S.labels}},tooltip:{...(T=e.plugins)==null?void 0:T.tooltip,...(L=s.plugins)==null?void 0:L.tooltip,callbacks:{...(P=(M=e.plugins)==null?void 0:M.tooltip)==null?void 0:P.callbacks,...(R=(D=s.plugins)==null?void 0:D.tooltip)==null?void 0:R.callbacks}}},scales:r?{...e.scales,...s.scales,x:{...(O=e.scales)==null?void 0:O.x,...($=s.scales)==null?void 0:$.x},y:{...(I=e.scales)==null?void 0:I.y,...(z=s.scales)==null?void 0:z.y}}:s.scales}:e},[s,n,_,w,x,C]),Y=()=>{if(!(!j.current||f==="exporting")){b("exporting");try{const r=j.current.toBase64Image("image/png",1),e=document.createElement("a");e.href=r,e.download=H,document.body.appendChild(e),e.click(),document.body.removeChild(e),b("exported"),m.current&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>{b("idle")},2e3)}catch{b("idle")}}},Z=f==="exporting"?"Exporting...":f==="exported"?"Exported":V;return t.jsxs(ue,{title:a,subtitle:c,icon:t.jsx(pe,{}),variant:"chart",accent:!0,theme:y,className:W,actions:t.jsx("button",{type:"button",onClick:Y,disabled:f==="exporting",className:`agentwp-card__button ${f==="exported"?"agentwp-card__button--muted":""}`,children:Z}),children:[(i||l)&&t.jsxs("div",{className:"agentwp-card__metric",children:[i&&t.jsx("span",{children:i}),l&&t.jsx("span",{className:"agentwp-card__trend",children:l})]}),t.jsxs("div",{className:"agentwp-card__chart",children:[v&&t.jsx("div",{className:"agentwp-card__chart-meta",children:v}),t.jsx("div",{className:"agentwp-card__chart-canvas",style:{height:G},children:t.jsx(q,{id:J,ref:j,data:U,options:X,plugins:K,role:"img","aria-label":a,"aria-describedby":g?k:void 0})})]}),p&&t.jsx("div",{className:"agentwp-card__muted",children:p}),g&&t.jsx("div",{className:"agentwp-sr-only",children:t.jsxs("table",{id:k,className:"agentwp-card__table",children:[g.caption&&t.jsx("caption",{children:g.caption}),t.jsx("thead",{children:t.jsx("tr",{children:g.headers.map(r=>t.jsx("th",{scope:"col",children:r},r))})}),t.jsx("tbody",{children:g.rows.map(r=>t.jsx("tr",{children:r.cells.map((e,d)=>t.jsx("td",{children:e},`${r.id}-${d}`))},r.id))})]})})]})}export{ve as default};
