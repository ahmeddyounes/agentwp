---

## Status: DONE

## Summary of Changes

1. **Created `SearchIndexInterface`** (`src/Contracts/SearchIndexInterface.php`)
   - Defines the contract for low-level search index access
   - Mirrors the `search()` method signature from the static `Index` class
   - Includes `DEFAULT_LIMIT` constant matching the original

2. **Created `SearchIndexAdapter`** (`src/Infrastructure/SearchIndexAdapter.php`)
   - Implements `SearchIndexInterface`
   - Wraps the static `Index::search()` method
   - Follows the infrastructure adapter pattern used elsewhere in the codebase

3. **Updated `SearchService`** (`src/Services/SearchService.php`)
   - Now depends on `SearchIndexInterface` via constructor injection
   - Removed direct static call to `Index::search()`
   - Calls `$this->searchIndex->search()` instead

4. **Updated `ServicesServiceProvider`** (`src/Providers/ServicesServiceProvider.php`)
   - Registers `SearchIndexInterface` → `SearchIndexAdapter` binding
   - Updated `SearchServiceInterface` → `SearchService` binding to inject `SearchIndexInterface`

5. **Updated `ContainerWiringTest`** (`tests/Integration/Container/ContainerWiringTest.php`)
   - Added `SearchIndexInterface` to the expected bindings list for `ServicesServiceProvider`

## How to Verify

```bash
# Run container wiring tests
./vendor/bin/phpunit tests/Integration/Container/ContainerWiringTest.php --testdox

# Run all unit and integration tests
./vendor/bin/phpunit tests/Unit tests/Integration --testdox

# Run PHP CodeSniffer
./vendor/bin/phpcs --standard=phpcs.xml src/Contracts/SearchIndexInterface.php src/Infrastructure/SearchIndexAdapter.php src/Services/SearchService.php

# Run PHPStan
./vendor/bin/phpstan analyse src/Contracts/SearchIndexInterface.php src/Infrastructure/SearchIndexAdapter.php src/Services/SearchService.php --level=5
```

## Risks / Follow-ups

- **Low risk**: The change is additive and backward compatible. The `SearchController` already depended on `SearchServiceInterface`, so it continues to work without modification.
- **Testability improvement**: Consumers can now mock `SearchIndexInterface` to test search behavior without hitting the actual database index.
- **Future consideration**: If additional index operations (e.g., `index_product`, `index_order`) need to be mockable, they could be added to the interface. Currently only `search()` is exposed since that's what `SearchService` uses.
