The implementation is complete. Let me provide the final summary.

---

**Status: DONE**

## Summary of Changes

### New Files
1. **`src/Demo/DemoCredentials.php`** - New class that defines explicit rules for demo mode credential handling:
   - Determines whether to use demo API key or stubbed responses
   - Enforces the rule that real API keys are NEVER used when demo mode is enabled
   - Priority for demo API key: constant > env variable > stored option

2. **`src/Demo/DemoClient.php`** - New client that implements `OpenAIClientInterface` and returns stubbed/deterministic responses:
   - Used when demo mode is enabled but no demo API key is configured
   - Returns context-aware demo responses based on keywords
   - Includes simulated token usage metrics
   - Always marks responses with `demo_mode: true` in metadata

3. **`tests/Unit/Demo/DemoCredentialsTest.php`** - Unit tests for `DemoCredentials`
4. **`tests/Unit/Demo/DemoClientTest.php`** - Unit tests for `DemoClient`

### Modified Files
1. **`src/AI/AIClientFactory.php`** - Updated to use `DemoCredentials` and enforce demo mode rules:
   - Demo mode ON + demo key: creates `OpenAIClient` with demo key
   - Demo mode ON + no demo key: creates `DemoClient` with stubbed responses
   - Demo mode OFF: creates `OpenAIClient` with real API key
   - Added `isDemoMode()` and `getCredentialInfo()` methods

2. **`src/Providers/InfrastructureServiceProvider.php`** - Updated to register `DemoCredentials` in the DI container

3. **`docs/DEMO.md`** - Updated with comprehensive documentation of demo mode credential rules

## How to Verify

```bash
# Run unit tests for demo functionality
vendor/bin/phpunit tests/Unit/Demo/

# Run all tests
vendor/bin/phpunit

# Check code standards
composer run phpcs -- src/Demo/ src/AI/AIClientFactory.php
```

## Acceptance Criteria Verification

1. **Demo mode produces deterministic behavior**: When no demo API key is configured, `DemoClient` returns predictable, context-aware responses based on input keywords.

2. **Never accidentally uses a real key when demo mode is enabled**: The `DemoCredentials.getEffectiveApiKey()` method enforces this rule - in demo mode, it only returns the demo API key (or empty string), never the real key. This is also tested in `DemoCredentialsTest::test_demo_mode_never_returns_real_key()`.

## Risks / Follow-ups

1. **None identified** - The changes are backward compatible. The `AIClientFactory` constructor still accepts the old signature (just SettingsManager) since `DemoCredentials` has a default value of `null` and is created internally if not provided.

2. **Potential enhancement**: The `DemoClient` could be extended to support function/tool call stubbing in the future if needed for more realistic demo scenarios.
