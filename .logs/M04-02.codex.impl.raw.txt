Status: DONE

Summary of changes
- Added local command history/favorites storage, most-used tracking, and a HistoryPanel UI with re-run/star/delete/clear actions plus a response star button in `react/src/App.jsx` and `react/components/HistoryPanel.jsx`.
- Extended success action cards to optionally render a star toggle in `react/components/cards/SuccessCard.jsx`.
- Added REST backup endpoints for history/favorites and registered the controller in `src/API/HistoryController.php` and `src/Plugin.php`.

How to verify (exact commands)
- None provided.

Risks / follow-ups
- No automated verification was run (no format/lint/test commands supplied).
- Server-side history endpoints are in place; wire optional sync in the UI if desired.

OpenAI Codex v0.77.0 (research preview)
--------
workdir: /Users/ahmedyounis/Documents/Projects/agentwp
model: gpt-5.2-codex
provider: openai
approval: never
sandbox: workspace-write [workdir, /tmp, $TMPDIR]
reasoning effort: high
reasoning summaries: auto
session id: 019b972a-2444-7e83-9390-b5e951385c0f
--------
user
You are implementing task M04-02 in this git repository.

1) Read the spec: .plans/M04-02.md
2) Read handoff/context: .t2/handoff/M04-02.md

Implement the spec fully.

Verification commands (run if non-empty):
- format: 
- lint: 
- test: 

In your final response, include:
- Status: DONE or NEEDS-REVIEW
- Summary of changes
- How to verify (exact commands)
- Risks / follow-ups

mcp startup: no servers

thinking
**Choosing file reading method**
exec
/bin/zsh -lc ls in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 55ms:
agentwp.php
assets
composer.json
docker
docker-compose.yml
docs
includes
languages
react
README.md
scripts
setup.sh
src
tasks.csv
uninstall.php

thinking
**Reading specification file**
exec
/bin/zsh -lc 'cat .plans/M04-02.md' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 70ms:
# M04-02 — Command History and Favorites

Implement command history and favorites: 1) Store in browser localStorage: last 50 commands with timestamps, favorited commands (user-starred). 2) AgentWP\API\HistoryController REST endpoints for server-side backup (optional sync). 3) React HistoryPanel component: recent commands list (grouped by date), favorites section (pinned at top), click to re-execute, swipe/button to delete. 4) Display in Command Deck when Omnibox is empty/focused. 5) Command format stored: raw_input, parsed_intent, timestamp, was_successful. 6) 'Star' button on successful action cards to add to favorites. 7) Usage analytics: track most-used commands (local only, privacy-preserving). Acceptance Criteria: History persists across browser sessions, favorites appear first, re-executing command uses current store state, clear history option available.

thinking
**Reading handoff notes**
exec
/bin/zsh -lc 'cat .t2/handoff/M04-02.md' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 68ms:
# Handoff: M04-02

Created: 2026-01-07T06:34:40.015866Z

Spec: .plans/M04-02.md

thinking
**Searching code for implementation clues**
exec
/bin/zsh -lc 'rg -n "History|Omnibox|Command Deck|command deck|omnibox|action card|ActionCard|Command" react src includes' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 75ms:
react/src/App.jsx:396:    const htmlSuccess = document.execCommand('copy');
react/src/App.jsx:414:    const textSuccess = document.execCommand('copy');
react/src/App.jsx:515:  const [draftHistory, setDraftHistory] = useState([]);
react/src/App.jsx:669:  const addDraftToHistory = useCallback((draft) => {
react/src/App.jsx:673:    setDraftHistory((prev) => {
react/src/App.jsx:822:        setDraftHistory(parsed.slice(0, MAX_DRAFT_HISTORY));
react/src/App.jsx:834:      window.localStorage.setItem(DRAFT_HISTORY_KEY, JSON.stringify(draftHistory));
react/src/App.jsx:838:  }, [draftHistory]);
react/src/App.jsx:1046:      addDraftToHistory({
react/src/App.jsx:1313:            Command Deck: instant actions for your store.
react/src/App.jsx:1316:            Invoke the Command Deck with Cmd+K / Ctrl+K or the admin bar button. Responses render
react/src/App.jsx:1333:              Open Command Deck
react/src/App.jsx:1344:            <h2 className="text-lg font-semibold text-white">Command Deck status</h2>
react/src/App.jsx:1446:                  Command Deck
react/src/App.jsx:1453:                aria-label="Close Command Deck"
react/src/App.jsx:1664:                      Visualize revenue trends and period performance inside the Command Deck.
react/src/App.jsx:1753:                  {draftHistory.length ? (
react/src/App.jsx:1754:                    draftHistory.map((draft) => {
react/components/cards/DangerousActionCard.jsx:18:export default function DangerousActionCard({
react/components/cards/index.js:2:export { default as DangerousActionCard } from './DangerousActionCard.jsx';

thinking
**Checking draftHistory in App.jsx**
exec
/bin/zsh -lc "sed -n '450,950p' react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 72ms:
  useEffect(() => {
    return () => {
      if (timerRef.current) {
        window.clearTimeout(timerRef.current);
      }
    };
  }, []);

  const handleCopy = async () => {
    if (disabled) {
      return;
    }
    const payload = await getPayload();
    if (!payload) {
      return;
    }
    try {
      const success = await copyToClipboard(payload);
      if (!success) {
        return;

thinking
**Searching for draft history references**
exec
/bin/zsh -lc "sed -n '1600,1880p' react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 54ms:
                      htmlFor="agentwp-draft-subject"
                      className="block text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500"
                    >
                      Email subject
                    </label>
                    <input
                      id="agentwp-draft-subject"
                      type="text"
                      value={draftSubject}
                      onChange={(event) => setDraftSubject(event.target.value)}
                      disabled={!hasDraft}
                      placeholder="Subject line"
                      className="mt-2 w-full rounded-xl border border-slate-700/70 bg-slate-950/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 disabled:cursor-not-allowed disabled:opacity-60"
                    />
                  </div>
                </div>
                <div className="mt-4 flex flex-wrap gap-2">
                  <ClipboardButton
                    label="Copy plain text"
                    disabled={!hasDraft}

thinking
**Searching for server-side API controllers**
exec
/bin/zsh -lc "rg -n \"API\\\\|HistoryController|Controller\" includes src" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 72ms:
src/Rest/HealthController.php:10:use AgentWP\API\RestController;
src/Rest/HealthController.php:13:class HealthController extends RestController {
src/Plugin.php:191:		if ( class_exists( 'AgentWP\\Rest\\SettingsController' ) ) {
src/Plugin.php:192:			$controller = new Rest\SettingsController();
src/Plugin.php:196:		if ( class_exists( 'AgentWP\\Rest\\IntentController' ) ) {
src/Plugin.php:197:			$controller = new Rest\IntentController();
src/Plugin.php:201:		if ( class_exists( 'AgentWP\\Rest\\HealthController' ) ) {
src/Plugin.php:202:			$controller = new Rest\HealthController();
src/Plugin.php:206:		if ( class_exists( 'AgentWP\\Rest\\SearchController' ) ) {
src/Plugin.php:207:			$controller = new Rest\SearchController();
src/Plugin.php:298:		if ( class_exists( 'AgentWP\\API\\RestController' ) ) {
src/Plugin.php:299:			API\RestController::log_request( $request, $status, $error_code );
src/Plugin.php:315:		return ( 0 === strpos( $route, '/' . API\RestController::REST_NAMESPACE ) );
src/Rest/SettingsController.php:10:use AgentWP\API\RestController;
src/Rest/SettingsController.php:16:class SettingsController extends RestController {
src/Rest/IntentController.php:10:use AgentWP\API\RestController;
src/Rest/IntentController.php:14:class IntentController extends RestController {
src/Rest/SearchController.php:10:use AgentWP\API\RestController;
src/Rest/SearchController.php:14:class SearchController extends RestController {
src/API/RestController.php:12:use WP_REST_Controller;

thinking
**Checking controller placement and base class**
exec
/bin/zsh -lc "sed -n '1,220p' src/API/RestController.php" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 69ms:
<?php
/**
 * Base REST controller.
 *
 * @package AgentWP
 */

namespace AgentWP\API;

use AgentWP\Plugin;
use WP_Error;
use WP_REST_Controller;
use WP_REST_Response;

abstract class RestController extends WP_REST_Controller {
	const REST_NAMESPACE = 'agentwp/v1';
	const RATE_LIMIT     = 60;
	const RATE_WINDOW    = 60;
	const LOG_LIMIT      = 50;


thinking
**Reviewing existing REST controllers**
exec
/bin/zsh -lc "sed -n '1,220p' src/Rest/IntentController.php" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 68ms:
<?php
/**
 * Intent REST controller.
 *
 * @package AgentWP
 */

namespace AgentWP\Rest;

use AgentWP\API\RestController;
use AgentWP\Intent\Engine;
use WP_REST_Server;

class IntentController extends RestController {
	/**
	 * Register REST routes.
	 *
	 * @return void
	 */
	public function register_routes() {

thinking
**Evaluating controller placement**
exec
/bin/zsh -lc "sed -n '1,200p' src/Rest/SettingsController.php" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 72ms:
<?php
/**
 * Settings REST controller.
 *
 * @package AgentWP
 */

namespace AgentWP\Rest;

use AgentWP\API\RestController;
use AgentWP\Plugin;
use AgentWP\Security\Encryption;
use WP_Error;
use WP_REST_Server;

class SettingsController extends RestController {

	/**
	 * Register REST routes.
	 *

thinking
**Preparing to implement history and favorites**
exec
/bin/zsh -lc "sed -n '150,260p' src/Plugin.php" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 71ms:
		$style_path  = AGENTWP_PLUGIN_DIR . 'assets/agentwp-admin.css';

		if ( file_exists( $script_path ) ) {
			wp_enqueue_script(
				'agentwp-admin',
				AGENTWP_PLUGIN_URL . 'assets/agentwp-admin.js',
				array( 'wp-element', 'wp-components', 'wp-api-fetch', 'wp-i18n' ),
				filemtime( $script_path ),
				true
			);

			wp_enqueue_style( 'wp-components' );

			wp_add_inline_script(
				'agentwp-admin',
				'window.agentwpSettings = ' . wp_json_encode(
					array(
						'root'  => esc_url_raw( rest_url() ),
						'nonce' => wp_create_nonce( 'wp_rest' ),
					)

thinking
**Preparing to update HistoryController registration**
exec
/bin/zsh -lc 'rg -n "ActionCard|response|responseHtml|success" react/src react/components' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 36ms:
react/src/App.jsx:467:      const success = await copyToClipboard(payload);
react/src/App.jsx:468:      if (!success) {
react/src/App.jsx:510:  const [response, setResponse] = useState('');
react/src/App.jsx:520:  const responseHtmlRef = useRef(null);
react/src/App.jsx:758:        const response = await fetch(url.toString(), {
react/src/App.jsx:765:        const data = await response.json().catch(() => null);
react/src/App.jsx:766:        if (!response.ok || data?.success === false) {
react/src/App.jsx:1018:      const response = await fetch(restEndpoint, {
react/src/App.jsx:1026:      const data = await response.json().catch(() => null);
react/src/App.jsx:1029:      if (!response.ok || data?.success === false) {
react/src/App.jsx:1096:  const hasDraft = Boolean(response && !errorMessage);
react/src/App.jsx:1097:  const resolvedBody = draftBody || stripMarkdownToPlainText(response);
react/src/App.jsx:1325:              &ldquo;Summarize today&apos;s pending orders and draft a response for the two longest
react/src/App.jsx:1362:                  Track orders and response momentum before drafting outreach.
react/src/App.jsx:1410:                  <p className="text-xs text-sky-300">Avg. 3.2 hrs response</p>
react/src/App.jsx:1567:                  ) : response ? (
react/src/App.jsx:1568:                    <div ref={responseHtmlRef} className="agentwp-markdown">
react/src/App.jsx:1576:                        {response}
react/src/App.jsx:1628:                        responseHtmlRef.current?.innerHTML ||
react/src/App.jsx:1635:                    getPayload={() => ({ text: response })}

thinking
**Searching for related action cards**
exec
/bin/zsh -lc "sed -n '1,200p' react/components/cards/SuccessCard.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 68ms:
import BaseCard from './BaseCard.jsx';

const CheckIcon = () => (
  <svg
    viewBox="0 0 24 24"
    width="20"
    height="20"
    aria-hidden="true"
    focusable="false"
  >
    <path
      fill="currentColor"
      d="M9.2 16.6 4.8 12.2a1 1 0 0 1 1.4-1.4l3 3 8-8a1 1 0 1 1 1.4 1.4l-9.4 9.4a1 1 0 0 1-1.4 0z"
    />
  </svg>
);

export default function SuccessCard({
  title = 'Action completed',
  summary,

thinking
**Checking response rendering for action cards**
exec
/bin/zsh -lc "sed -n '1200,1680p' react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 65ms:
  );
  const trendTable = useMemo(
    () => ({
      caption: `Daily revenue for ${periodData.label}`,
      headers: ['Day', 'This period', 'Previous period'],
      rows: periodData.labels.map((label, index) => ({
        id: `trend-${selectedPeriod}-${label}`,
        cells: [
          label,
          formatCurrencyValue(periodData.current[index]),
          formatCurrencyValue(periodData.previous[index]),
        ],
      })),
    }),
    [periodData, selectedPeriod]
  );
  const comparisonTable = useMemo(
    () => ({
      caption: `Period comparison metrics for ${periodData.label}`,
      headers: ['Metric', 'This period', 'Last period'],

thinking
**Inspecting command submission handling**
exec
/bin/zsh -lc "sed -n '940,1200p' react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 69ms:
        event.preventDefault();
        if (event.shiftKey) {
          last.focus();
        } else {
          first.focus();
        }
        return;
      }
      if (event.shiftKey) {
        if (activeElement === first) {
          event.preventDefault();
          last.focus();
        }
      } else if (activeElement === last) {
        event.preventDefault();
        first.focus();
      }
    };

    document.addEventListener('keydown', handleKeydown);

thinking
**Planning command history storage and display**
exec
/bin/zsh -lc 'rg -n "parsed|intent" src react' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 76ms:
react/src/App.jsx:16:const REST_PATH = '/agentwp/v1/intent';
react/src/App.jsx:820:      const parsed = JSON.parse(stored);
react/src/App.jsx:821:      if (Array.isArray(parsed)) {
react/src/App.jsx:822:        setDraftHistory(parsed.slice(0, MAX_DRAFT_HISTORY));
src/Rest/IntentController.php:23:			'/intent',
src/Rest/IntentController.php:26:				'callback'            => array( $this, 'create_intent' ),
src/Rest/IntentController.php:33:	 * Handle intent requests.
src/Rest/IntentController.php:38:	public function create_intent( $request ) {
src/Rest/IntentController.php:39:		$validation = $this->validate_request( $request, $this->get_intent_schema() );
src/Rest/IntentController.php:69:			return $this->response_error( 'agentwp_intent_failed', $response->get_message(), $response->get_status() );
src/Rest/IntentController.php:73:		$data['intent_id']  = wp_generate_uuid4();
src/Rest/IntentController.php:80:	 * Schema for intent payload.
src/Rest/IntentController.php:84:	private function get_intent_schema() {
src/Handlers/EmailDraftHandler.php:68:		$intent = isset( $args['intent'] ) ? $this->normalize_intent( $args['intent'] ) : '';
src/Handlers/EmailDraftHandler.php:69:		if ( '' === $intent ) {
src/Handlers/EmailDraftHandler.php:70:			return Response::error( 'Missing or invalid email intent.', 400 );
src/Handlers/EmailDraftHandler.php:91:		$draft = $this->generate_draft( $context, $intent, $tone, $custom_instructions, $template_variables );
src/Handlers/EmailDraftHandler.php:102:			'intent'             => $intent,
src/Handlers/EmailDraftHandler.php:220:		if ( isset( $args['intent'] ) ) {
src/Handlers/EmailDraftHandler.php:221:			$normalized = $this->normalize_intent( $args['intent'] );

thinking
**Checking intent engine implementation**
exec
/bin/zsh -lc "sed -n '70,140p' src/Intent/Engine.php" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 69ms:

		$this->handlers = ! empty( $handlers ) ? $handlers : $this->default_handlers();
		$this->register_default_functions();
	}

	/**
	 * Handle a natural language input.
	 *
	 * @param string $input User input.
	 * @param array  $context Request context.
	 * @param array  $metadata Request metadata.
	 * @return Response
	 */
	public function handle( $input, array $context = array(), array $metadata = array() ) {
		$input = is_string( $input ) ? trim( $input ) : '';
		if ( '' === $input ) {
			return Response::error( 'Missing intent input.', 400 );
		}

		$enriched = $this->context_builder->build( $context, $metadata );

thinking
**Inspecting Response class**
exec
/bin/zsh -lc 'rg -n "class Response" -n src' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 74ms:
src/AI/Response.php:10:class Response {
exec
/bin/zsh -lc "sed -n '1,160p' src/AI/Response.php" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 33ms:
<?php
/**
 * OpenAI response wrapper.
 *
 * @package AgentWP
 */

namespace AgentWP\AI;

class Response {
	/**
	 * @var bool
	 */
	private $success;

	/**
	 * @var int
	 */
	private $status;


thinking
**Investigating intent data in handlers**
exec
/bin/zsh -lc 'rg -n "Response::success" -n src/Intent src/Handlers' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 59ms:
src/Handlers/RefundHandler.php:114:		return Response::success(
src/Handlers/RefundHandler.php:205:		return Response::success(
src/Handlers/AnalyticsHandler.php:70:			return Response::success( $cached );
src/Handlers/AnalyticsHandler.php:94:		return Response::success( $payload );
src/Handlers/CustomerHandler.php:48:		return Response::success( $payload );
src/Intent/Handlers/BaseHandler.php:66:		return Response::success( $payload );
src/Handlers/OrderSearchHandler.php:36:			return Response::success(
src/Handlers/OrderSearchHandler.php:49:		return Response::success(
src/Handlers/EmailDraftHandler.php:126:		return Response::success(
src/Handlers/EmailDraftHandler.php:162:		return Response::success(
src/Handlers/EmailDraftHandler.php:233:			return Response::success(
src/Handlers/EmailDraftHandler.php:293:		return Response::success(
src/Handlers/OrderStatusHandler.php:113:		return Response::success(
src/Handlers/OrderStatusHandler.php:233:		return Response::success(
src/Handlers/OrderStatusHandler.php:313:		return Response::success(
src/Handlers/OrderStatusHandler.php:396:		return Response::success(
src/Handlers/StockHandler.php:55:		return Response::success(
src/Handlers/StockHandler.php:152:		return Response::success(
src/Handlers/StockHandler.php:232:		return Response::success(

thinking
**Checking Intent Handlers directory**
exec
/bin/zsh -lc "sed -n '1,120p' src/Intent/Handlers/BaseHandler.php" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 68ms:
<?php
/**
 * Base handler for intent responses.
 *
 * @package AgentWP
 */

namespace AgentWP\Intent\Handlers;

use AgentWP\AI\Response;
use AgentWP\Intent\Handler;
use AgentWP\Intent\Intent;

abstract class BaseHandler implements Handler {
	/**
	 * @var string
	 */
	protected $intent;

	/**

thinking
**Analyzing data structure and UI components**
exec
/bin/zsh -lc 'rg -n "SuccessCard|DangerousActionCard|BaseCard" react/src' in /Users/ahmedyounis/Documents/Projects/agentwp exited 1 in 74ms:


thinking
**Checking component usage across app**
exec
/bin/zsh -lc 'rg -n "cards" react/src react/components' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 44ms:
react/src/App.jsx:4:import { ChartCard } from '../components/cards';
react/components/cards/BaseCard.jsx:2:import './cards.css';

thinking
**Analyzing command history and action cards**
exec
/bin/zsh -lc 'rg -n "OPTION_" src/Plugin.php src' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 65ms:
src/Plugin.php:11:	const OPTION_SETTINGS     = 'agentwp_settings';
src/Plugin.php:12:	const OPTION_API_KEY      = 'agentwp_api_key';
src/Plugin.php:13:	const OPTION_API_KEY_LAST4 = 'agentwp_api_key_last4';
src/Plugin.php:14:	const OPTION_BUDGET_LIMIT = 'agentwp_budget_limit';
src/Plugin.php:15:	const OPTION_DRAFT_TTL    = 'agentwp_draft_ttl_minutes';
src/Plugin.php:16:	const OPTION_USAGE_STATS  = 'agentwp_usage_stats';
src/Plugin.php:51:		add_option( self::OPTION_SETTINGS, $defaults, '', false );
src/Plugin.php:52:		add_option( self::OPTION_USAGE_STATS, $usage_default, '', false );
src/Plugin.php:53:		add_option( self::OPTION_BUDGET_LIMIT, 0, '', false );
src/Plugin.php:54:		add_option( self::OPTION_DRAFT_TTL, 10, '', false );
src/Plugin.php:55:		add_option( self::OPTION_API_KEY, '', '', false );
src/Plugin.php:56:		add_option( self::OPTION_API_KEY_LAST4, '', '', false );
src/Rest/SettingsController.php:72:		$last4    = get_option( Plugin::OPTION_API_KEY_LAST4, '' );
src/Rest/SettingsController.php:73:		$has_key  = ! empty( $last4 ) || ! empty( get_option( Plugin::OPTION_API_KEY ) );
src/Rest/SettingsController.php:102:		update_option( Plugin::OPTION_SETTINGS, $updated, false );
src/Rest/SettingsController.php:129:			delete_option( Plugin::OPTION_API_KEY );
src/Rest/SettingsController.php:130:			delete_option( Plugin::OPTION_API_KEY_LAST4 );
src/Rest/SettingsController.php:154:		update_option( Plugin::OPTION_API_KEY, $encrypted, false );
src/Rest/SettingsController.php:157:		update_option( Plugin::OPTION_API_KEY_LAST4, $last4, false );
src/Rest/SettingsController.php:187:		$usage    = get_option( Plugin::OPTION_USAGE_STATS, array() );

thinking
**Designing command history and favorites features**

I'm planning to store command history and favorites in local storage and user meta keys, keeping history capped at 50 entries and favorites separate. I'll build a React HistoryPanel showing favorites pinned above recent history, with star toggles to add or remove favorites, delete buttons, and a clear history option. For mobile, I'll try a simple swipe-to-delete detection. I'll also track usage counts locally for analytics without exposing them to users. The panel will display in the Command Deck when the input is empty and focused, replacing placeholder text. Integration with existing or future action card components might be needed for starring successful actions. I'll follow the app’s Tailwind styling conventions.
exec
/bin/zsh -lc 'ls react/components' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 68ms:
cards

thinking
**Inspecting BaseCard class**
exec
/bin/zsh -lc "sed -n '1,200p' react/components/cards/BaseCard.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 69ms:
import { useId } from 'react';
import './cards.css';

export default function BaseCard({
  title,
  subtitle,
  icon,
  actions,
  children,
  variant = 'info',
  accent = false,
  theme = 'dark',
  className = '',
}) {
  const titleId = useId();
  const cardClasses = [
    'agentwp-card',
    `agentwp-card--${variant}`,
    accent ? 'agentwp-card--accent' : '',
    className,

thinking
**Investigating SuccessCard usage**
exec
/bin/zsh -lc 'rg -n "SuccessCard|ActionCard|card__"' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 36ms:
react/components/cards/ErrorCard.jsx:29:    <button type="button" className="agentwp-card__link" onClick={onReport}>
react/components/cards/ErrorCard.jsx:33:    <a className="agentwp-card__link" href={reportHref}>
react/components/cards/ErrorCard.jsx:46:          <button type="button" className="agentwp-card__button" onClick={onRetry}>
react/components/cards/ErrorCard.jsx:53:      {message && <p className="agentwp-card__text">{message}</p>}
react/components/cards/DangerousActionCard.jsx:18:export default function DangerousActionCard({
react/components/cards/DangerousActionCard.jsx:38:            className="agentwp-card__button agentwp-card__button--danger"
react/components/cards/DangerousActionCard.jsx:45:            className="agentwp-card__button agentwp-card__button--muted"
react/components/cards/DangerousActionCard.jsx:53:      {details && <p className="agentwp-card__text">{details}</p>}
react/components/cards/cards.css:123:.agentwp-card__header {
react/components/cards/cards.css:129:.agentwp-card__icon {
react/components/cards/cards.css:141:.agentwp-card__title {
react/components/cards/cards.css:148:.agentwp-card__subtitle {
react/components/cards/cards.css:154:.agentwp-card__body {
react/components/cards/cards.css:160:.agentwp-card__text {
react/components/cards/cards.css:166:.agentwp-card__muted {
react/components/cards/cards.css:170:.agentwp-card__actions {
react/components/cards/cards.css:177:.agentwp-card__button {
react/components/cards/cards.css:189:.agentwp-card__button:hover {
react/components/cards/cards.css:195:.agentwp-card__button:disabled {
react/components/cards/cards.css:201:.agentwp-card__button:focus-visible {

thinking
**Designing star button and favorites integration**

I'm thinking through how to add a star button to mark successful action cards as favorites. The spec says to put the star on successful action cards, but it's unclear if the response area counts as a card, so adding a star next to successful responses might be the best way to satisfy this. I'll consider updating the SuccessCard component to optionally show a star button, even though it's not currently used in the app, and plan to store favorites and command usage in localStorage with date grouping for display in the command deck. This also means figuring out analytics for command counts and creating UI panels for favorites and recent commands grouped by date. I’ll inspect the app further to integrate these pieces smoothly.
exec
/bin/zsh -lc "sed -n '1,120p' react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 70ms:
import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
import html2canvas from 'html2canvas';
import ReactMarkdown from 'react-markdown';
import { ChartCard } from '../components/cards';

const OPEN_STATE_KEY = 'agentwp-command-deck-open';
const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
const MAX_DRAFT_HISTORY = 10;
const COPY_FEEDBACK_MS = 2000;
const EXPORT_FEEDBACK_MS = 2000;
const ADMIN_TRIGGER_SELECTORS = [
  '#wp-admin-bar-agentwp',
  '[data-agentwp-command-deck]',
  '#agentwp-command-deck',
];
const REST_PATH = '/agentwp/v1/intent';
const SEARCH_PATH = '/agentwp/v1/search';
const FOCUSABLE_SELECTORS = [
  'a[href]',
  'button:not([disabled])',

thinking
**Preparing to add new utility functions**
exec
/bin/zsh -lc 'rg -n "getRestEndpoint|getRestNonce" -n react/src/App.jsx' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 69ms:
235:const getRestEndpoint = () => {
257:const getRestNonce = () => {
748:        const restNonce = getRestNonce();
1012:      const restEndpoint = getRestEndpoint();
1013:      const restNonce = getRestNonce();
exec
/bin/zsh -lc "sed -n '200,320p' react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 69ms:
        media.removeEventListener('change', handleChange);
      } else {
        media.removeListener(handleChange);
      }
    };
  }, []);

  return prefersDark;
};

const getInitialOpenState = () => {
  if (typeof window === 'undefined') {
    return false;
  }
  try {
    return window.sessionStorage.getItem(OPEN_STATE_KEY) === 'true';
  } catch (error) {
    return false;
  }
};


thinking
**Designing command history and favorites system**

I'm mapping out a React HistoryPanel component with localStorage-backed command history, favorites, and usage analytics. I plan to store commands with unique IDs, track usage counts, handle deduplication, enable starring/un-starring, group history by date labels, and allow swipe-to-delete and button actions. I'll manage focus behavior to show the panel only when the prompt is empty and focused, and cleanly separate favorites at the top. The plan includes utility functions to sanitize, parse, and store entries safely, plus re-execution logic that integrates with existing submit handlers. Tailwind CSS classes will handle styling without extra CSS files. This approach feels quite thorough for a responsive, user-friendly history UI with privacy-preserving local analytics.
thinking
**Implementing favorites UI and REST endpoints**

I'm planning to add a favorites section with star toggles and removal, plus swipe/delete only for history entries. The history panel only shows when the omnibox is focused and empty, replacing response output accordingly. On the backend, I'll build a HistoryController with REST endpoints to get and update user's history and favorites stored as user meta, including schema validation, permission checks, and size limits. I'll integrate this controller into plugin route registration following existing namespace patterns. This sets up syncing command history and favorites between client and server.
exec
/bin/zsh -lc "sed -n '1,80p' src/Plugin.php" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 67ms:
<?php
/**
 * Core plugin bootstrap.
 *
 * @package AgentWP
 */

namespace AgentWP;

class Plugin {
	const OPTION_SETTINGS     = 'agentwp_settings';
	const OPTION_API_KEY      = 'agentwp_api_key';
	const OPTION_API_KEY_LAST4 = 'agentwp_api_key_last4';
	const OPTION_BUDGET_LIMIT = 'agentwp_budget_limit';
	const OPTION_DRAFT_TTL    = 'agentwp_draft_ttl_minutes';
	const OPTION_USAGE_STATS  = 'agentwp_usage_stats';
	const TRANSIENT_PREFIX    = 'agentwp_';

	/**
	 * @var Plugin|null

thinking
**Checking namespace and autoload setup**
exec
/bin/zsh -lc 'cat composer.json' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 77ms:
{
  "name": "agentwp/agentwp",
  "description": "AgentWP WordPress plugin.",
  "type": "wordpress-plugin",
  "license": "GPL-2.0-or-later",
  "autoload": {
    "psr-4": {
      "AgentWP\\": "src/"
    }
  },
  "require": {
    "php": ">=7.4",
    "yethee/tiktoken": "^0.1.2"
  }
}

thinking
**Evaluating optional server sync implementation**
exec
/bin/zsh -lc 'ls react/src' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 68ms:
App.jsx
index.css
main.jsx
exec
/bin/zsh -lc "sed -n '1,200p' react/src/index.css" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 49ms:
@import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600&family=Space+Grotesk:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: dark;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: "Space Grotesk", "Manrope", system-ui, -apple-system, "Segoe UI", sans-serif;
  background-color: #05070c;
  background-image:
    radial-gradient(circle at 12% 18%, rgba(56, 189, 248, 0.12), transparent 45%),
    radial-gradient(circle at 80% 10%, rgba(99, 102, 241, 0.12), transparent 35%),
    radial-gradient(circle at 20% 90%, rgba(14, 116, 144, 0.2), transparent 40%),
    linear-gradient(160deg, #05070c 0%, #0a1120 50%, #05070c 100%);



thinking
**Designing command history and favorites features**

I'm planning to add star buttons to SuccessCard and HistoryPanel to mark favorites, designing HistoryPanel with grouping and actions like run, delete, and toggle favorite. I'll handle state for command history, favorites, and usage with localStorage persistence, ensuring commands are normalized and properly keyed. Also, I’m considering UI layout details to avoid nested buttons and integrating star functionality thoughtfully in response and draft action areas. This involves careful coordination between components and thoughtful user interaction patterns.
thinking
**Implementing state and storage for history and favorites**

I'm adding helper functions to normalize and key command entries, setting up state and effects to load/save history, favorites, and usage from localStorage. I’m planning callbacks to record and toggle favorites, clear history, and handle command execution with prompt syncing. I’m carefully managing async updates to ensure the latest command is tracked for UI like star buttons, aligning everything for smooth integration and persistence.
thinking
**Adding most-used commands section**

I’m planning to compute and pass a most-used commands list to HistoryPanel for quick access, showing top commands based on usage counts. This enhances analytics visibility and usability by letting users easily rerun frequent commands. I'll keep the UI simple and local-only, integrating smoothly with existing history and favorites features.
exec
/bin/zsh -lc "sed -n '1,80p' react/components/cards/index.js" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 72ms:
export { default as BaseCard } from './BaseCard.jsx';
export { default as DangerousActionCard } from './DangerousActionCard.jsx';
export { default as SuccessCard } from './SuccessCard.jsx';
export { default as ErrorCard } from './ErrorCard.jsx';
export { default as InfoCard } from './InfoCard.jsx';
export { default as ChartCard } from './ChartCard.jsx';
export { default as DataTableCard } from './DataTableCard.jsx';


thinking
**Planning HistoryPanel component and API**

I'm sketching out the `HistoryPanel` React component with sections for favorites, most used, and grouped recent commands, ensuring UI consistency and efficient favorite lookup via keys or passed functions. I’m also designing a PHP `HistoryController` REST API to handle history and favorites with sanitization, schema validation, and user meta storage. Plus, I'm considering frontend localStorage syncing, event handling, and scroll UI details to integrate history features smoothly.
thinking
**Planning UI integration and App constants**

I'm considering how to integrate the HistoryPanel with scrolling and spacing, deciding where to place the "clear history" button, and reviewing how to conditionally show the panel based on input focus and emptiness (omnibox behavior). I'm also preparing to add related constants and helper functions to App.jsx for managing command history, favorites, and usage, ensuring tidy placement near existing utilities and making room for new logic.
exec
/bin/zsh -lc 'rg -n "ClipboardButton" -n react/src/App.jsx' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 69ms:
446:const ClipboardButton = ({ label, getPayload, disabled }) => {
1617:                  <ClipboardButton
1622:                  <ClipboardButton
1632:                  <ClipboardButton


thinking
**Planning command history and submission features**

I'll design new helper functions, state variables, and effects to manage command history, favorites, and usage, plus refactor the submit command logic to record commands and track their outcomes with proper cleanup and edge case handling.
thinking
**Examining loading state and command execution handling**

I’m analyzing how aborting requests and loading flags interact to avoid race conditions, then defining executeCommand to trigger command submission and setting up derived values like favorites keys and most-used commands for rendering history and favorites.
exec
/bin/zsh -lc "sed -n '160,220p' react/components/cards/cards.css" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 35ms:
.agentwp-card__text {
  margin: 0;
  font-size: 0.92rem;
  color: var(--card-text);
}

.agentwp-card__muted {
  color: var(--card-muted);
}

.agentwp-card__actions {
  display: flex;
  flex-wrap: wrap;
  gap: 0.6rem;
  align-items: center;
}

.agentwp-card__button {
  border-radius: 999px;
  padding: 0.45rem 0.95rem;

thinking
**Preparing to add HistoryPanel component and HistoryController**
file update
A /Users/ahmedyounis/Documents/Projects/agentwp/react/components/HistoryPanel.jsx
import { useMemo, useRef } from 'react';

const StarIcon = ({ filled }) => (
  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
    <path
      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
      fill={filled ? 'currentColor' : 'none'}
      stroke="currentColor"
      strokeWidth="1.6"
      strokeLinejoin="round"
    />
  </svg>
);

const TrashIcon = () => (
  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
    <path
      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
      fill="none"
      stroke="currentColor"
      strokeWidth="1.6"
      strokeLinecap="round"
      strokeLinejoin="round"
    />
  </svg>
);

const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;

const formatTime = (timestamp) => {
  const date = new Date(timestamp);
  if (Number.isNaN(date.getTime())) {
    return '';
  }
  return date.toLocaleTimeString(undefined, {
    hour: 'numeric',
    minute: '2-digit',
  });
};

const formatDayLabel = (timestamp, now) => {
  const date = new Date(timestamp);
  if (Number.isNaN(date.getTime())) {
    return 'Unknown date';
  }
  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);

  if (diffDays === 0) {
    return 'Today';
  }
  if (diffDays === 1) {
    return 'Yesterday';
  }
  return date.toLocaleDateString(undefined, {
    month: 'short',
    day: 'numeric',
    year: 'numeric',
  });
};

const groupHistory = (entries, now) => {
  const groups = [];
  entries.forEach((entry) => {
    const label = formatDayLabel(entry.timestamp, now);
    const existing = groups.find((group) => group.label === label);
    if (existing) {
      existing.items.push(entry);
    } else {
      groups.push({ label, items: [entry] });
    }
  });
  return groups;
};

export default function HistoryPanel({
  history = [],
  favorites = [],
  mostUsed = [],
  onRun,
  onDelete,
  onToggleFavorite,
  onClearHistory,
  isFavorited,
}) {
  const now = useMemo(() => new Date(), []);
  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
  const favoriteKeys = useMemo(
    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
    [favorites]
  );
  const touchStartRef = useRef({});

  const handleTouchStart = (entryId) => (event) => {
    const touch = event.touches[0];
    touchStartRef.current[entryId] = {
      x: touch.clientX,
      y: touch.clientY,
    };
  };

  const handleTouchEnd = (entry) => (event) => {
    const start = touchStartRef.current[entry.id];
    if (!start) {
      return;
    }
    delete touchStartRef.current[entry.id];
    const touch = event.changedTouches[0];
    const deltaX = touch.clientX - start.x;
    const deltaY = touch.clientY - start.y;
    if (deltaX < -60 && Math.abs(deltaY) < 40) {
      onDelete?.(entry);
    }
  };

  const renderCommandRow = (entry, { showDelete }) => {
    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
    const timeLabel = formatTime(entry.timestamp);
    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';

    return (
      <div
        key={entry.id}
        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
      >
        <button
          type="button"
          onClick={() => onRun?.(entry.raw_input)}
          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
        >
          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
            {timeLabel ? <span>{timeLabel}</span> : null}
            <span className="flex items-center gap-1">
              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
              {statusLabel}
            </span>
          </span>
        </button>
        <button
          type="button"
          onClick={() => onToggleFavorite?.(entry)}
          aria-pressed={isStarred}
          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
            isStarred
              ? 'border-amber-400/70 text-amber-200'
              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
          }`}
          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
        >
          <StarIcon filled={isStarred} />
        </button>
        {showDelete ? (
          <button
            type="button"
            onClick={() => onDelete?.(entry)}
            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
            aria-label="Remove from history"
          >
            <TrashIcon />
          </button>
        ) : null}
      </div>
    );
  };

  return (
    <div className="space-y-4">
      <div className="flex flex-wrap items-center justify-between gap-3">
        <div>
          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
            Command history
          </p>
          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
        </div>
        <button
          type="button"
          onClick={() => onClearHistory?.()}
          disabled={!history.length}
          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
            history.length
              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
          }`}
        >
          Clear history
        </button>
      </div>

      <div className="space-y-2">
        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
          Favorites
        </p>
        {favorites.length ? (
          <div className="space-y-2">
            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
          </div>
        ) : (
          <p className="text-xs text-slate-500">
            No favorites yet. Star a successful command to keep it here.
          </p>
        )}
      </div>

      {mostUsed.length ? (
        <div className="space-y-2">
          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
            Most used
          </p>
          <div className="flex flex-wrap gap-2">
            {mostUsed.map((entry) => (
              <button
                key={entry.raw_input}
                type="button"
                onClick={() => onRun?.(entry.raw_input)}
                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
              >
                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
                <span className="text-[10px] text-slate-500">{entry.count}x</span>
              </button>
            ))}
          </div>
        </div>
      ) : null}

      <div className="space-y-2">
        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
          Recent commands
        </p>
        {history.length ? (
          <div className="space-y-3">
            {groupedHistory.map((group) => (
              <div key={group.label} className="space-y-2">
                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
                <div className="space-y-2">
                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
                </div>
              </div>
            ))}
          </div>
        ) : (
          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
        )}
      </div>
    </div>
  );
}
apply_patch(auto_approved=true) exited 0 in 17ms:
Success. Updated the following files:
A react/components/HistoryPanel.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}


thinking
**Updating App.jsx imports**
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/src/App.jsx
@@ -3,2 +3,3 @@
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
apply_patch(auto_approved=true) exited 0 in 24ms:
Success. Updated the following files:
M react/src/App.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..3a633827fd1732a82550ca4402dc7494d2fa85af
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,6 +1,7 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..3a633827fd1732a82550ca4402dc7494d2fa85af
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,6 +1,7 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';


thinking
**Adding new constants**
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/src/App.jsx
@@ -9,2 +9,7 @@
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
apply_patch(auto_approved=true) exited 0 in 23ms:
Success. Updated the following files:
M react/src/App.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..1e15560dbbeacb9f28f947a04ea973ec70e74112
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..1e15560dbbeacb9f28f947a04ea973ec70e74112
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [


thinking
**Locating buildMailtoLink function**
exec
/bin/zsh -lc 'rg -n "buildMailtoLink" -n react/src/App.jsx' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 42ms:
323:const buildMailtoLink = (subject, body) => {
1104:  const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..1e15560dbbeacb9f28f947a04ea973ec70e74112
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [

exec
/bin/zsh -lc "sed -n '320,420p' react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 33ms:
    .join('');
};

const buildMailtoLink = (subject, body) => {
  const parts = [];
  if (subject) {
    parts.push(`subject=${encodeURIComponent(subject)}`);
  }
  if (body) {
    const normalizedBody = body.replace(/\r?\n/g, '\r\n');
    parts.push(`body=${encodeURIComponent(normalizedBody)}`);
  }
  return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
};

const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');

const getHighlightTokens = (query) => {
  if (!query) {
    return [];
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..1e15560dbbeacb9f28f947a04ea973ec70e74112
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [


thinking
**Adding helper functions after buildMailtoLink**
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/src/App.jsx
@@ -334,2 +334,40 @@
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
apply_patch(auto_approved=true) exited 0 in 28ms:
Success. Updated the following files:
M react/src/App.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..ffd36acab179c7d240b79b388c29ee8d86b56be7
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..ffd36acab179c7d240b79b388c29ee8d86b56be7
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {


thinking
**Inserting new state variables**
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/src/App.jsx
@@ -559,2 +559,6 @@
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
apply_patch(auto_approved=true) exited 0 in 27ms:
Success. Updated the following files:
M react/src/App.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..df2d2d76091e1ecd384de13a000349056a05174d
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..df2d2d76091e1ecd384de13a000349056a05174d
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);


thinking
**Locating insertion point for command history functions**
exec
/bin/zsh -lc 'rg -n "addDraftToHistory" -n react/src/App.jsx' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 37ms:
717:  const addDraftToHistory = useCallback((draft) => {
1094:      addDraftToHistory({
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..df2d2d76091e1ecd384de13a000349056a05174d
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);

exec
/bin/zsh -lc "sed -n '700,780p' react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 32ms:
      }

      if (event.key === 'Escape') {
        event.stopPropagation();
        setIsTypeaheadOpen(false);
        setActiveSuggestionIndex(-1);
      }
    },
    [
      activeSuggestionIndex,
      flatSuggestions,
      handleSuggestionSelect,
      hasSuggestions,
      isTypeaheadOpen,
    ]
  );

  const addDraftToHistory = useCallback((draft) => {
    if (!draft?.markdown) {
      return;
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..df2d2d76091e1ecd384de13a000349056a05174d
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);


thinking
**Planning function additions between key methods**
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/src/App.jsx
@@ -739,2 +739,53 @@
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
apply_patch(auto_approved=true) exited 0 in 27ms:
Success. Updated the following files:
M react/src/App.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..70adf3a8595ae55bc4dcf2f6a17b5a4dd1a6e5ca
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..70adf3a8595ae55bc4dcf2f6a17b5a4dd1a6e5ca
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;


thinking
**Adding localStorage effects for command history**
exec
/bin/zsh -lc "sed -n '800,880p' react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 34ms:
    setIsOpen(false);
  }, [abortActiveRequest]);

  const handleRestoreDraft = useCallback(
    (draft) => {
      if (!draft) {
        return;
      }
      abortActiveRequest();
      setPrompt(draft.prompt || '');
      setResponse(draft.markdown || '');
      setDraftSubject(draft.subject || draft.prompt || 'AgentWP Draft');
      setDraftBody(draft.plainText || stripMarkdownToPlainText(draft.markdown || ''));
      setErrorMessage('');
      setMetrics({ latencyMs: null, tokenCost: null });
      setLoading(false);
    },
    [abortActiveRequest]
  );

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..70adf3a8595ae55bc4dcf2f6a17b5a4dd1a6e5ca
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;


thinking
**Locating draft history effects**
exec
/bin/zsh -lc 'rg -n "DRAFT_HISTORY_KEY" -n react/src/App.jsx' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 40ms:
8:const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
915:      const stored = window.localStorage.getItem(DRAFT_HISTORY_KEY);
933:      window.localStorage.setItem(DRAFT_HISTORY_KEY, JSON.stringify(draftHistory));
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..70adf3a8595ae55bc4dcf2f6a17b5a4dd1a6e5ca
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;

exec
/bin/zsh -lc "sed -n '900,980p' react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 31ms:
      if (isOpen) {
        window.sessionStorage.setItem(OPEN_STATE_KEY, 'true');
      } else {
        window.sessionStorage.removeItem(OPEN_STATE_KEY);
      }
    } catch (error) {
      // Ignore storage failures (private mode, strict policies).
    }
  }, [isOpen]);

  useEffect(() => {
    if (typeof window === 'undefined') {
      return;
    }
    try {
      const stored = window.localStorage.getItem(DRAFT_HISTORY_KEY);
      if (!stored) {
        return;
      }
      const parsed = JSON.parse(stored);
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..70adf3a8595ae55bc4dcf2f6a17b5a4dd1a6e5ca
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;


thinking
**Inserting new effects in sequence**
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/src/App.jsx
@@ -939,2 +939,68 @@
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
apply_patch(auto_approved=true) exited 0 in 24ms:
Success. Updated the following files:
M react/src/App.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..9e13034f7ed7c0f5ad38311b14503d6daa765a3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..9e13034f7ed7c0f5ad38311b14503d6daa765a3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }


thinking
**Preparing to refactor handleSubmit function**
exec
/bin/zsh -lc "sed -n '980,1125p' react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 32ms:
    }
  }, [commandHistory]);

  useEffect(() => {
    if (typeof window === 'undefined') {
      return;
    }
    try {
      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
    } catch (error) {
      // Ignore storage failures (private mode, strict policies).
    }
  }, [favoriteCommands]);

  useEffect(() => {
    if (typeof window === 'undefined') {
      return;
    }
    try {
      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..9e13034f7ed7c0f5ad38311b14503d6daa765a3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }


thinking
**Continuing search after handleSubmit**
exec
/bin/zsh -lc "sed -n '1125,1265p' react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 31ms:
    return () => document.removeEventListener('keydown', handleKeydown);
  }, [closeModal, isOpen]);

  useEffect(() => {
    return () => {
      abortActiveRequest();
    };
  }, [abortActiveRequest]);

  useEffect(() => {
    return () => {
      abortSearchRequest();
      if (searchTimeoutRef.current) {
        window.clearTimeout(searchTimeoutRef.current);
      }
      if (promptBlurTimeoutRef.current) {
        window.clearTimeout(promptBlurTimeoutRef.current);
      }
    };
  }, [abortSearchRequest]);
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..9e13034f7ed7c0f5ad38311b14503d6daa765a3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }


thinking
**Replacing handleSubmit block**
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/src/App.jsx
@@ -1153,79 +1153,126 @@
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    const startTime = getNow();
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
+
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
+
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
apply_patch(auto_approved=true) exited 0 in 26ms:
Success. Updated the following files:
M react/src/App.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..3c2796c4fe5110cb19ef3d130028df763860ea0d
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    const startTime = getNow();
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
+
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..3c2796c4fe5110cb19ef3d130028df763860ea0d
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    const startTime = getNow();
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
+
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {


thinking
**Adding memoized command state values**

I’m preparing to insert several derived state variables like favoriteCommandKeys, visibleHistory, mostUsedCommands, and flags like showHistoryPanel right before the hasDraft constant to reflect the current command and UI state, using useMemo and useCallback carefully to ensure dependencies are stable and performant.
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/src/App.jsx
@@ -1307,2 +1307,30 @@
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
@@ -1310,2 +1338,3 @@
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
apply_patch(auto_approved=true) exited 0 in 24ms:
Success. Updated the following files:
M react/src/App.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..a6d79232e6c436ff804d798b33742b41502b4356
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    const startTime = getNow();
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
+
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
+
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..a6d79232e6c436ff804d798b33742b41502b4356
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    const startTime = getNow();
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
+
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
+
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&


thinking
**Locating response panel markup**
exec
/bin/zsh -lc "rg -n \"min-h\\[140px\\]\" -n react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp exited 1 in 41ms:

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..a6d79232e6c436ff804d798b33742b41502b4356
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    const startTime = getNow();
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
+
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
+
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&


thinking
**Checking CSS class usage**
exec
/bin/zsh -lc "rg -n \"min-h-\\[140px\\]\" react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 69ms:
1796:                  className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..a6d79232e6c436ff804d798b33742b41502b4356
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    const startTime = getNow();
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
+
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
+
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&

exec
/bin/zsh -lc "sed -n '1768,1848p' react/src/App.jsx" in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 53ms:
                                        : 'border-transparent bg-slate-950/30 text-slate-200 hover:border-slate-600/60 hover:bg-slate-900/70'
                                    }`}
                                  >
                                    <span className="mt-1 text-slate-400">{config?.icon}</span>
                                    <span className="flex-1">
                                      <span className="block text-sm font-semibold text-slate-100">
                                        {renderHighlightedText(item.primary || '', prompt)}
                                      </span>
                                      {item.secondary ? (
                                        <span className="block text-xs text-slate-400">
                                          {renderHighlightedText(item.secondary, prompt)}
                                        </span>
                                      ) : null}
                                    </span>
                                  </button>
                                );
                              })}
                            </div>
                          </div>
                        );
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..a6d79232e6c436ff804d798b33742b41502b4356
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    const startTime = getNow();
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
+
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
+
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&


thinking
**Updating response panel with history and star features**

I'm figuring out how to conditionally show the HistoryPanel or the latest response inside the response panel, depending on whether the prompt is focused and empty, while also handling loading and error states carefully. I plan to add a star button to mark the last successful command as favorite, embedding an inline SVG icon for it, and pass all necessary callbacks and data for history management to the HistoryPanel. This should let users toggle favorites and see history neatly when the input is empty and focused.
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/src/App.jsx
@@ -1794,2 +1794,32 @@
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
@@ -1799,3 +1829,14 @@
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
apply_patch(auto_approved=true) exited 0 in 37ms:
Success. Updated the following files:
M react/src/App.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..20e9f43970d05444b85ac5e5fe055729db72cc3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7250a49b2b1a08ea8f27df49dc94c076fe3a2b25
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4">
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..20e9f43970d05444b85ac5e5fe055729db72cc3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />


thinking
**Resolving history panel focus issues**

I'm making sure the history panel stays visible and interactive by preventing the input from losing focus when clicking inside the panel; this involves adding an `onMouseDown` handler that calls `preventDefault()` on the panel container to keep input focused and avoid premature hiding while users interact with it.
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/components/HistoryPanel.jsx
@@ -172,3 +172,3 @@
   return (
-    <div className="space-y-4">
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
       <div className="flex flex-wrap items-center justify-between gap-3">
apply_patch(auto_approved=true) exited 0 in 43ms:
Success. Updated the following files:
M react/components/HistoryPanel.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..ed7f2b57f0484d523e69492f300b4ebc199735c2
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..20e9f43970d05444b85ac5e5fe055729db72cc3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..ed7f2b57f0484d523e69492f300b4ebc199735c2
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..20e9f43970d05444b85ac5e5fe055729db72cc3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />


thinking
**Enhancing HistoryPanel and SuccessCard components**
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/components/cards/SuccessCard.jsx
@@ -24,2 +24,5 @@
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
@@ -35,2 +38,15 @@
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
@@ -42,3 +58,3 @@
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
apply_patch(auto_approved=true) exited 0 in 41ms:
Success. Updated the following files:
M react/components/cards/SuccessCard.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..ed7f2b57f0484d523e69492f300b4ebc199735c2
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..20e9f43970d05444b85ac5e5fe055729db72cc3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..ed7f2b57f0484d523e69492f300b4ebc199735c2
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..20e9f43970d05444b85ac5e5fe055729db72cc3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />


thinking
**Reviewing star button and history logic**
file update
A /Users/ahmedyounis/Documents/Projects/agentwp/src/API/HistoryController.php
<?php
/**
 * History REST controller.
 *
 * @package AgentWP
 */

namespace AgentWP\API;

use WP_REST_Server;

class HistoryController extends RestController {
	const HISTORY_META_KEY   = 'agentwp_command_history';
	const FAVORITES_META_KEY = 'agentwp_command_favorites';
	const HISTORY_LIMIT      = 50;
	const FAVORITES_LIMIT    = 50;

	/**
	 * Register REST routes.
	 *
	 * @return void
	 */
	public function register_routes() {
		register_rest_route(
			$this->namespace,
			'/history',
			array(
				array(
					'methods'             => WP_REST_Server::READABLE,
					'callback'            => array( $this, 'get_history' ),
					'permission_callback' => array( $this, 'permissions_check' ),
				),
				array(
					'methods'             => WP_REST_Server::EDITABLE,
					'callback'            => array( $this, 'update_history' ),
					'permission_callback' => array( $this, 'permissions_check' ),
				),
			)
		);
	}

	/**
	 * Return stored history and favorites.
	 *
	 * @param \WP_REST_Request $request Request instance.
	 * @return \WP_REST_Response
	 */
	public function get_history( $request ) {
		$user_id  = get_current_user_id();
		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );

		$history   = is_array( $history ) ? $history : array();
		$favorites = is_array( $favorites ) ? $favorites : array();

		return $this->response_success(
			array(
				'history'   => $history,
				'favorites' => $favorites,
			)
		);
	}

	/**
	 * Store updated history payload.
	 *
	 * @param \WP_REST_Request $request Request instance.
	 * @return \WP_REST_Response
	 */
	public function update_history( $request ) {
		$validation = $this->validate_request( $request, $this->get_history_schema() );
		if ( is_wp_error( $validation ) ) {
			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
		}

		$payload   = $request->get_json_params();
		$payload   = is_array( $payload ) ? $payload : array();
		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();

		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );

		$user_id = get_current_user_id();
		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );

		return $this->response_success(
			array(
				'updated'   => true,
				'history'   => $history,
				'favorites' => $favorites,
			)
		);
	}

	/**
	 * Schema for history payload.
	 *
	 * @return array
	 */
	private function get_history_schema() {
		$entry_schema = array(
			'type'       => 'object',
			'properties' => array(
				'raw_input'      => array(
					'type' => 'string',
				),
				'parsed_intent'  => array(
					'type' => 'string',
				),
				'timestamp'      => array(
					'type' => 'string',
				),
				'was_successful' => array(
					'type' => 'boolean',
				),
			),
		);

		return array(
			'type'       => 'object',
			'properties' => array(
				'history'   => array(
					'type'  => 'array',
					'items' => $entry_schema,
				),
				'favorites' => array(
					'type'  => 'array',
					'items' => $entry_schema,
				),
			),
		);
	}

	/**
	 * Normalize stored entries.
	 *
	 * @param array $entries History entries.
	 * @param int   $limit Max entries to store.
	 * @return array
	 */
	private function sanitize_entries( $entries, $limit ) {
		$entries    = is_array( $entries ) ? $entries : array();
		$normalized = array();

		foreach ( $entries as $entry ) {
			if ( ! is_array( $entry ) ) {
				continue;
			}

			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
			if ( '' === $raw_input ) {
				continue;
			}

			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;

			$normalized[] = array(
				'raw_input'      => $raw_input,
				'parsed_intent'  => $parsed_intent,
				'timestamp'      => $timestamp,
				'was_successful' => $was_successful,
			);
		}

		if ( $limit > 0 && count( $normalized ) > $limit ) {
			$normalized = array_slice( $normalized, 0, $limit );
		}

		return $normalized;
	}
}
apply_patch(auto_approved=true) exited 0 in 44ms:
Success. Updated the following files:
A src/API/HistoryController.php
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..ed7f2b57f0484d523e69492f300b4ebc199735c2
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..20e9f43970d05444b85ac5e5fe055729db72cc3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..ed7f2b57f0484d523e69492f300b4ebc199735c2
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..20e9f43970d05444b85ac5e5fe055729db72cc3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}


thinking
**Inserting HistoryController registration**
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/src/Plugin.php
@@ -209,2 +209,7 @@
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
apply_patch(auto_approved=true) exited 0 in 45ms:
Success. Updated the following files:
M src/Plugin.php
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..ed7f2b57f0484d523e69492f300b4ebc199735c2
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..20e9f43970d05444b85ac5e5fe055729db72cc3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..ed7f2b57f0484d523e69492f300b4ebc199735c2
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,252 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..20e9f43970d05444b85ac5e5fe055729db72cc3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**


thinking
**Reviewing and refining HistoryPanel logic**
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/components/HistoryPanel.jsx
@@ -118,2 +118,3 @@
     const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
     const timeLabel = formatTime(entry.timestamp);
@@ -148,2 +149,3 @@
           aria-pressed={isStarred}
+          disabled={!canFavorite}
           className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
@@ -151,3 +153,5 @@
               ? 'border-amber-400/70 text-amber-200'
-              : 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
           }`}
apply_patch(auto_approved=true) exited 0 in 65ms:
Success. Updated the following files:
M react/components/HistoryPanel.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..a2642e20f4679bd6cbf1a69d530a69107b4c7a8b
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,256 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..20e9f43970d05444b85ac5e5fe055729db72cc3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..a2642e20f4679bd6cbf1a69d530a69107b4c7a8b
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,256 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..20e9f43970d05444b85ac5e5fe055729db72cc3a
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object') {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**


thinking
**Reviewing and refining history and usage handling**
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/src/App.jsx
@@ -962,3 +962,3 @@
         const parsedUsage = JSON.parse(storedUsage);
-        if (parsedUsage && typeof parsedUsage === 'object') {
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
           setCommandUsage(parsedUsage);
apply_patch(auto_approved=true) exited 0 in 53ms:
Success. Updated the following files:
M react/src/App.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..a2642e20f4679bd6cbf1a69d530a69107b4c7a8b
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,256 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..fe43f1cb0cb4a1a8f7c3106e16682e3597f45bfb
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..a2642e20f4679bd6cbf1a69d530a69107b4c7a8b
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,256 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..fe43f1cb0cb4a1a8f7c3106e16682e3597f45bfb
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**


thinking
**Reviewing history and command usage updates**
exec
/bin/zsh -lc 'rg -n "HistoryPanel" -n react/src react/components' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 46ms:
react/components/HistoryPanel.jsx:77:export default function HistoryPanel({
react/src/App.jsx:4:import HistoryPanel from '../components/HistoryPanel.jsx';
react/src/App.jsx:1339:  const showHistoryPanel = isPromptFocused && !prompt.trim();
react/src/App.jsx:1795:                {!showHistoryPanel && (
react/src/App.jsx:1830:                  {showHistoryPanel ? (
react/src/App.jsx:1831:                    <HistoryPanel
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..a2642e20f4679bd6cbf1a69d530a69107b4c7a8b
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,256 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..fe43f1cb0cb4a1a8f7c3106e16682e3597f45bfb
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,44 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +557,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +737,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +937,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1151,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1305,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1792,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**



thinking
**Summarizing update checklist for HistoryPanel and App.jsx integration**
thinking
**Preparing command serialization for localStorage**

I'm planning to update how command entries are stored by serializing only the specified fields to strictly follow the format, adding a helper to normalize and filter entries before saving them to localStorage for both history and favorites.
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/src/App.jsx
@@ -372,2 +372,11 @@
 
+const serializeCommandEntry = (entry) => {
+  const normalized = normalizeCommandEntry(entry);
+  if (!normalized) {
+    return null;
+  }
+  const { raw_input, parsed_intent, timestamp, was_successful } = normalized;
+  return { raw_input, parsed_intent, timestamp, was_successful };
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
apply_patch(auto_approved=true) exited 0 in 59ms:
Success. Updated the following files:
M react/src/App.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..a2642e20f4679bd6cbf1a69d530a69107b4c7a8b
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,256 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..381cdd8ee64daa153bc8ef82850bad0110dac7d9
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,53 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
+const serializeCommandEntry = (entry) => {
+  const normalized = normalizeCommandEntry(entry);
+  if (!normalized) {
+    return null;
+  }
+  const { raw_input, parsed_intent, timestamp, was_successful } = normalized;
+  return { raw_input, parsed_intent, timestamp, was_successful };
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +566,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +746,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +946,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1160,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    const startTime = getNow();
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
+
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
+
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1314,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1801,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..a2642e20f4679bd6cbf1a69d530a69107b4c7a8b
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,256 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..381cdd8ee64daa153bc8ef82850bad0110dac7d9
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,53 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
+const serializeCommandEntry = (entry) => {
+  const normalized = normalizeCommandEntry(entry);
+  if (!normalized) {
+    return null;
+  }
+  const { raw_input, parsed_intent, timestamp, was_successful } = normalized;
+  return { raw_input, parsed_intent, timestamp, was_successful };
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +566,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +746,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +946,72 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1160,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    const startTime = getNow();
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
+
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
+
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1314,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1801,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**


thinking
**Updating localStorage handling**
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/src/App.jsx
@@ -985,3 +985,4 @@
     try {
-      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(commandHistory));
+      const payload = commandHistory.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(payload));
     } catch (error) {
@@ -996,3 +997,4 @@
     try {
-      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(favoriteCommands));
+      const payload = favoriteCommands.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(payload));
     } catch (error) {
apply_patch(auto_approved=true) exited 0 in 61ms:
Success. Updated the following files:
M react/src/App.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..a2642e20f4679bd6cbf1a69d530a69107b4c7a8b
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,256 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..29f6b61ddae04fb932c46be70e9b2dfb0a00d58d
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,53 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
+const serializeCommandEntry = (entry) => {
+  const normalized = normalizeCommandEntry(entry);
+  if (!normalized) {
+    return null;
+  }
+  const { raw_input, parsed_intent, timestamp, was_successful } = normalized;
+  return { raw_input, parsed_intent, timestamp, was_successful };
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +566,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +746,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +946,74 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = commandHistory.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = favoriteCommands.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1162,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    const startTime = getNow();
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
+
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
+
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1316,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1803,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..a2642e20f4679bd6cbf1a69d530a69107b4c7a8b
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,256 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..29f6b61ddae04fb932c46be70e9b2dfb0a00d58d
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,53 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
+const serializeCommandEntry = (entry) => {
+  const normalized = normalizeCommandEntry(entry);
+  if (!normalized) {
+    return null;
+  }
+  const { raw_input, parsed_intent, timestamp, was_successful } = normalized;
+  return { raw_input, parsed_intent, timestamp, was_successful };
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +566,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +746,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +946,74 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = commandHistory.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = favoriteCommands.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1162,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    const startTime = getNow();
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
+
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
+
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1316,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1803,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**


thinking
**Reviewing command history and usage updates**

I’m verifying each step for storing and managing command history, usage counts, and favorites in localStorage and React components. I’m checking updates to serialization, timestamps, React hooks, UI behavior like showing history and starring commands, and ensuring stability and proper dependencies throughout the app. Everything seems aligned, so next I’ll confirm that the commandUsage state and related functions are correctly integrated.
exec
/bin/zsh -lc 'rg -n "commandUsage" react/src/App.jsx' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 61ms:
571:  const [commandUsage, setCommandUsage] = useState({});
1010:      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
1014:  }, [commandUsage]);
1328:    const entries = Object.entries(commandUsage || {});
1337:  }, [commandUsage]);
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..a2642e20f4679bd6cbf1a69d530a69107b4c7a8b
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,256 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..29f6b61ddae04fb932c46be70e9b2dfb0a00d58d
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,53 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
+const serializeCommandEntry = (entry) => {
+  const normalized = normalizeCommandEntry(entry);
+  if (!normalized) {
+    return null;
+  }
+  const { raw_input, parsed_intent, timestamp, was_successful } = normalized;
+  return { raw_input, parsed_intent, timestamp, was_successful };
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +566,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +746,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +946,74 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = commandHistory.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = favoriteCommands.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1162,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    const startTime = getNow();
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
+
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
+
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1316,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1803,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**


thinking
**Reviewing frontend and API integration steps**
exec
/bin/zsh -lc 'rg -n "lastSuccessfulCommand" react/src/App.jsx' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 54ms:
1342:  const lastSuccessfulCommand =
1344:  const isLastCommandFavorited = lastSuccessfulCommand
1345:    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
1811:                    {hasDraft && lastSuccessfulCommand ? (
1814:                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..a2642e20f4679bd6cbf1a69d530a69107b4c7a8b
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,256 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!history.length}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            history.length
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..29f6b61ddae04fb932c46be70e9b2dfb0a00d58d
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,53 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
+const serializeCommandEntry = (entry) => {
+  const normalized = normalizeCommandEntry(entry);
+  if (!normalized) {
+    return null;
+  }
+  const { raw_input, parsed_intent, timestamp, was_successful } = normalized;
+  return { raw_input, parsed_intent, timestamp, was_successful };
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +566,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +746,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +946,74 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = commandHistory.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = favoriteCommands.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1162,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    const startTime = getNow();
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
+
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
+
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1316,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1803,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**


thinking
**Analyzing HistoryPanel clear button logic**
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/components/HistoryPanel.jsx
@@ -78,2 +78,3 @@
   history = [],
+  historyCount,
   favorites = [],
@@ -86,2 +87,3 @@
 }) {
+  const totalHistory = typeof historyCount === 'number' ? historyCount : history.length;
   const now = useMemo(() => new Date(), []);
@@ -187,5 +189,5 @@
           onClick={() => onClearHistory?.()}
-          disabled={!history.length}
+          disabled={!totalHistory}
           className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
-            history.length
+            totalHistory
               ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
@@ -250,3 +252,7 @@
         ) : (
-          <p className="text-xs text-slate-500">No commands yet. Ask AgentWP to get started.</p>
+          <p className="text-xs text-slate-500">
+            {totalHistory
+              ? 'All recent commands are already favorited.'
+              : 'No commands yet. Ask AgentWP to get started.'}
+          </p>
         )}
apply_patch(auto_approved=true) exited 0 in 65ms:
Success. Updated the following files:
M react/components/HistoryPanel.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7952be5f84a997bfefe4444383aa13a633bae555
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,262 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  historyCount,
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const totalHistory = typeof historyCount === 'number' ? historyCount : history.length;
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!totalHistory}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            totalHistory
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            {totalHistory
+              ? 'All recent commands are already favorited.'
+              : 'No commands yet. Ask AgentWP to get started.'}
+          </p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..29f6b61ddae04fb932c46be70e9b2dfb0a00d58d
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,53 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
+const serializeCommandEntry = (entry) => {
+  const normalized = normalizeCommandEntry(entry);
+  if (!normalized) {
+    return null;
+  }
+  const { raw_input, parsed_intent, timestamp, was_successful } = normalized;
+  return { raw_input, parsed_intent, timestamp, was_successful };
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +566,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +746,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +946,74 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = commandHistory.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = favoriteCommands.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1162,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    const startTime = getNow();
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
+
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
+
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1316,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1803,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7952be5f84a997bfefe4444383aa13a633bae555
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,262 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  historyCount,
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const totalHistory = typeof historyCount === 'number' ? historyCount : history.length;
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!totalHistory}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            totalHistory
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            {totalHistory
+              ? 'All recent commands are already favorited.'
+              : 'No commands yet. Ask AgentWP to get started.'}
+          </p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..29f6b61ddae04fb932c46be70e9b2dfb0a00d58d
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,53 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
+const serializeCommandEntry = (entry) => {
+  const normalized = normalizeCommandEntry(entry);
+  if (!normalized) {
+    return null;
+  }
+  const { raw_input, parsed_intent, timestamp, was_successful } = normalized;
+  return { raw_input, parsed_intent, timestamp, was_successful };
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +566,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +746,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +946,74 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = commandHistory.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = favoriteCommands.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1162,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
 
-    const startTime = getNow();
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
+
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
+
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1316,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1803,53 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**


thinking
**Updating App component to pass historyCount**
file update
M /Users/ahmedyounis/Documents/Projects/agentwp/react/src/App.jsx
@@ -1843,2 +1843,3 @@
                       history={visibleHistory}
+                      historyCount={commandHistory.length}
                       favorites={favoriteCommands}
apply_patch(auto_approved=true) exited 0 in 47ms:
Success. Updated the following files:
M react/src/App.jsx
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7952be5f84a997bfefe4444383aa13a633bae555
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,262 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  historyCount,
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const totalHistory = typeof historyCount === 'number' ? historyCount : history.length;
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!totalHistory}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            totalHistory
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            {totalHistory
+              ? 'All recent commands are already favorited.'
+              : 'No commands yet. Ask AgentWP to get started.'}
+          </p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..cf9b8b66c3f73bb69e4142ef560071e14f5a306c
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,53 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
+const serializeCommandEntry = (entry) => {
+  const normalized = normalizeCommandEntry(entry);
+  if (!normalized) {
+    return null;
+  }
+  const { raw_input, parsed_intent, timestamp, was_successful } = normalized;
+  return { raw_input, parsed_intent, timestamp, was_successful };
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +566,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +746,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +946,74 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = commandHistory.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = favoriteCommands.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1162,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1316,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1803,54 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      historyCount={commandHistory.length}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**

file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7952be5f84a997bfefe4444383aa13a633bae555
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,262 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  historyCount,
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const totalHistory = typeof historyCount === 'number' ? historyCount : history.length;
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!totalHistory}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            totalHistory
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            {totalHistory
+              ? 'All recent commands are already favorited.'
+              : 'No commands yet. Ask AgentWP to get started.'}
+          </p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..cf9b8b66c3f73bb69e4142ef560071e14f5a306c
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,53 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
+const serializeCommandEntry = (entry) => {
+  const normalized = normalizeCommandEntry(entry);
+  if (!normalized) {
+    return null;
+  }
+  const { raw_input, parsed_intent, timestamp, was_successful } = normalized;
+  return { raw_input, parsed_intent, timestamp, was_successful };
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +566,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +746,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +946,74 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = commandHistory.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = favoriteCommands.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1162,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1316,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1803,54 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      historyCount={commandHistory.length}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**


thinking
**Finalizing history panel and state updates**
exec
/bin/zsh -lc 'rg -n "HistoryController" src' in /Users/ahmedyounis/Documents/Projects/agentwp succeeded in 47ms:
src/Plugin.php:211:		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
src/Plugin.php:212:			$controller = new API\HistoryController();
src/API/HistoryController.php:12:class HistoryController extends RestController {
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7952be5f84a997bfefe4444383aa13a633bae555
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,262 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  historyCount,
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const totalHistory = typeof historyCount === 'number' ? historyCount : history.length;
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!totalHistory}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            totalHistory
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            {totalHistory
+              ? 'All recent commands are already favorited.'
+              : 'No commands yet. Ask AgentWP to get started.'}
+          </p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..cf9b8b66c3f73bb69e4142ef560071e14f5a306c
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,53 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
+const serializeCommandEntry = (entry) => {
+  const normalized = normalizeCommandEntry(entry);
+  if (!normalized) {
+    return null;
+  }
+  const { raw_input, parsed_intent, timestamp, was_successful } = normalized;
+  return { raw_input, parsed_intent, timestamp, was_successful };
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +566,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +746,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +946,74 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = commandHistory.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = favoriteCommands.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1162,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1316,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1803,54 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      historyCount={commandHistory.length}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**


thinking
**Summarizing final update details**

I'll summarize the final change details covering added command history and favorites storage, UI updates in HistoryPanel and SuccessCard, new HistoryController endpoints, and note the lack of automated tests or verification commands, preparing a clear final response with status, summary, verification steps, and potential risks or follow-ups.
codex
Status: DONE

Summary of changes
- Added local command history/favorites storage, most-used tracking, and a HistoryPanel UI with re-run/star/delete/clear actions plus a response star button in `react/src/App.jsx` and `react/components/HistoryPanel.jsx`.
- Extended success action cards to optionally render a star toggle in `react/components/cards/SuccessCard.jsx`.
- Added REST backup endpoints for history/favorites and registered the controller in `src/API/HistoryController.php` and `src/Plugin.php`.

How to verify (exact commands)
- None provided.

Risks / follow-ups
- No automated verification was run (no format/lint/test commands supplied).
- Server-side history endpoints are in place; wire optional sync in the UI if desired.
file update:
diff --git a/react/components/HistoryPanel.jsx b/react/components/HistoryPanel.jsx
new file mode 100644
index 0000000000000000000000000000000000000000..7952be5f84a997bfefe4444383aa13a633bae555
--- /dev/null
+++ b/react/components/HistoryPanel.jsx
@@ -0,0 +1,262 @@
+import { useMemo, useRef } from 'react';
+
+const StarIcon = ({ filled }) => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+      fill={filled ? 'currentColor' : 'none'}
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const TrashIcon = () => (
+  <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+    <path
+      d="M5 7h14M10 7V5h4v2M8.5 7v11m3-11v11m3-11v11M6.5 7l.7 12a1 1 0 0 0 1 .9h7.6a1 1 0 0 0 1-.9l.7-12"
+      fill="none"
+      stroke="currentColor"
+      strokeWidth="1.6"
+      strokeLinecap="round"
+      strokeLinejoin="round"
+    />
+  </svg>
+);
+
+const buildCommandKey = (entry) => `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const formatTime = (timestamp) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return '';
+  }
+  return date.toLocaleTimeString(undefined, {
+    hour: 'numeric',
+    minute: '2-digit',
+  });
+};
+
+const formatDayLabel = (timestamp, now) => {
+  const date = new Date(timestamp);
+  if (Number.isNaN(date.getTime())) {
+    return 'Unknown date';
+  }
+  const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());
+  const startOfDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());
+  const diffDays = Math.round((startOfToday - startOfDate) / 86400000);
+
+  if (diffDays === 0) {
+    return 'Today';
+  }
+  if (diffDays === 1) {
+    return 'Yesterday';
+  }
+  return date.toLocaleDateString(undefined, {
+    month: 'short',
+    day: 'numeric',
+    year: 'numeric',
+  });
+};
+
+const groupHistory = (entries, now) => {
+  const groups = [];
+  entries.forEach((entry) => {
+    const label = formatDayLabel(entry.timestamp, now);
+    const existing = groups.find((group) => group.label === label);
+    if (existing) {
+      existing.items.push(entry);
+    } else {
+      groups.push({ label, items: [entry] });
+    }
+  });
+  return groups;
+};
+
+export default function HistoryPanel({
+  history = [],
+  historyCount,
+  favorites = [],
+  mostUsed = [],
+  onRun,
+  onDelete,
+  onToggleFavorite,
+  onClearHistory,
+  isFavorited,
+}) {
+  const totalHistory = typeof historyCount === 'number' ? historyCount : history.length;
+  const now = useMemo(() => new Date(), []);
+  const groupedHistory = useMemo(() => groupHistory(history, now), [history, now]);
+  const favoriteKeys = useMemo(
+    () => new Set(favorites.map((entry) => buildCommandKey(entry))),
+    [favorites]
+  );
+  const touchStartRef = useRef({});
+
+  const handleTouchStart = (entryId) => (event) => {
+    const touch = event.touches[0];
+    touchStartRef.current[entryId] = {
+      x: touch.clientX,
+      y: touch.clientY,
+    };
+  };
+
+  const handleTouchEnd = (entry) => (event) => {
+    const start = touchStartRef.current[entry.id];
+    if (!start) {
+      return;
+    }
+    delete touchStartRef.current[entry.id];
+    const touch = event.changedTouches[0];
+    const deltaX = touch.clientX - start.x;
+    const deltaY = touch.clientY - start.y;
+    if (deltaX < -60 && Math.abs(deltaY) < 40) {
+      onDelete?.(entry);
+    }
+  };
+
+  const renderCommandRow = (entry, { showDelete }) => {
+    const isStarred = isFavorited ? isFavorited(entry) : favoriteKeys.has(buildCommandKey(entry));
+    const canFavorite = entry.was_successful || isStarred;
+    const timeLabel = formatTime(entry.timestamp);
+    const statusLabel = entry.was_successful ? 'Successful' : 'Failed';
+    const statusColor = entry.was_successful ? 'bg-emerald-400/70' : 'bg-rose-400/70';
+
+    return (
+      <div
+        key={entry.id}
+        className="flex items-start gap-2 rounded-xl border border-slate-800/80 bg-slate-950/40 px-3 py-2 transition hover:border-slate-600/80"
+        onTouchStart={showDelete ? handleTouchStart(entry.id) : undefined}
+        onTouchEnd={showDelete ? handleTouchEnd(entry) : undefined}
+      >
+        <button
+          type="button"
+          onClick={() => onRun?.(entry.raw_input)}
+          className="flex-1 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+        >
+          <span className="block text-sm font-semibold text-slate-100">{entry.raw_input}</span>
+          <span className="mt-1 flex flex-wrap items-center gap-2 text-[11px] text-slate-500">
+            {entry.parsed_intent ? <span>{entry.parsed_intent}</span> : null}
+            {timeLabel ? <span>{timeLabel}</span> : null}
+            <span className="flex items-center gap-1">
+              <span className={`h-1.5 w-1.5 rounded-full ${statusColor}`} />
+              {statusLabel}
+            </span>
+          </span>
+        </button>
+        <button
+          type="button"
+          onClick={() => onToggleFavorite?.(entry)}
+          aria-pressed={isStarred}
+          disabled={!canFavorite}
+          className={`inline-flex h-8 w-8 items-center justify-center rounded-full border text-xs transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+            isStarred
+              ? 'border-amber-400/70 text-amber-200'
+              : canFavorite
+                ? 'border-slate-700/70 text-slate-400 hover:border-slate-500/80 hover:text-slate-200'
+                : 'cursor-not-allowed border-slate-800/60 text-slate-600'
+          }`}
+          aria-label={isStarred ? 'Remove favorite' : 'Add favorite'}
+        >
+          <StarIcon filled={isStarred} />
+        </button>
+        {showDelete ? (
+          <button
+            type="button"
+            onClick={() => onDelete?.(entry)}
+            className="inline-flex h-8 w-8 items-center justify-center rounded-full border border-slate-700/70 text-slate-400 transition hover:border-slate-500/80 hover:text-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-300"
+            aria-label="Remove from history"
+          >
+            <TrashIcon />
+          </button>
+        ) : null}
+      </div>
+    );
+  };
+
+  return (
+    <div className="space-y-4" onMouseDown={(event) => event.preventDefault()}>
+      <div className="flex flex-wrap items-center justify-between gap-3">
+        <div>
+          <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Command history
+          </p>
+          <p className="text-sm text-slate-300">Re-run recent commands or pin favorites.</p>
+        </div>
+        <button
+          type="button"
+          onClick={() => onClearHistory?.()}
+          disabled={!totalHistory}
+          className={`inline-flex items-center justify-center rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 ${
+            totalHistory
+              ? 'border-slate-600/70 bg-slate-900/70 text-white hover:border-slate-400/80 hover:bg-slate-900'
+              : 'cursor-not-allowed border-slate-700/60 bg-slate-900/50 text-slate-500'
+          }`}
+        >
+          Clear history
+        </button>
+      </div>
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Favorites
+        </p>
+        {favorites.length ? (
+          <div className="space-y-2">
+            {favorites.map((entry) => renderCommandRow(entry, { showDelete: false }))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            No favorites yet. Star a successful command to keep it here.
+          </p>
+        )}
+      </div>
+
+      {mostUsed.length ? (
+        <div className="space-y-2">
+          <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+            Most used
+          </p>
+          <div className="flex flex-wrap gap-2">
+            {mostUsed.map((entry) => (
+              <button
+                key={entry.raw_input}
+                type="button"
+                onClick={() => onRun?.(entry.raw_input)}
+                className="inline-flex max-w-full items-center gap-2 rounded-full border border-slate-700/70 bg-slate-950/40 px-3 py-1 text-xs text-slate-200 transition hover:border-slate-500/80 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400"
+              >
+                <span className="max-w-[200px] truncate">{entry.raw_input}</span>
+                <span className="text-[10px] text-slate-500">{entry.count}x</span>
+              </button>
+            ))}
+          </div>
+        </div>
+      ) : null}
+
+      <div className="space-y-2">
+        <p className="text-[11px] font-semibold uppercase tracking-[0.3em] text-slate-500">
+          Recent commands
+        </p>
+        {history.length ? (
+          <div className="space-y-3">
+            {groupedHistory.map((group) => (
+              <div key={group.label} className="space-y-2">
+                <p className="text-xs font-semibold text-slate-400">{group.label}</p>
+                <div className="space-y-2">
+                  {group.items.map((entry) => renderCommandRow(entry, { showDelete: true }))}
+                </div>
+              </div>
+            ))}
+          </div>
+        ) : (
+          <p className="text-xs text-slate-500">
+            {totalHistory
+              ? 'All recent commands are already favorited.'
+              : 'No commands yet. Ask AgentWP to get started.'}
+          </p>
+        )}
+      </div>
+    </div>
+  );
+}
diff --git a/react/components/cards/SuccessCard.jsx b/react/components/cards/SuccessCard.jsx
index a64f32e900bdde3651ce16beb667c13d4e168d09..bd969e711b4a903c84c7907fb8f5afbf7a0611f2
--- a/react/components/cards/SuccessCard.jsx
+++ b/react/components/cards/SuccessCard.jsx
@@ -22,6 +22,9 @@
   onUndo,
   undoHref,
   theme = 'dark',
+  onStar,
+  isStarred = false,
+  starLabel = 'Star',
 }) {
   const undoAction = onUndo ? (
     <button type="button" className="agentwp-card__link" onClick={onUndo}>
@@ -33,6 +36,19 @@
     </a>
   ) : null;
 
+  const starAction = onStar ? (
+    <button
+      type="button"
+      className="agentwp-card__link"
+      onClick={onStar}
+      aria-pressed={isStarred}
+    >
+      {isStarred ? 'Starred' : starLabel}
+    </button>
+  ) : null;
+
+  const actions = [undoAction, starAction].filter(Boolean);
+
   return (
     <BaseCard
       title={title}
@@ -40,7 +56,7 @@
       variant="success"
       accent
       theme={theme}
-      actions={undoAction}
+      actions={actions.length ? actions : null}
     >
       {summary && <p className="agentwp-card__text">{summary}</p>}
     </BaseCard>
diff --git a/react/src/App.jsx b/react/src/App.jsx
index 9007e24a6b9a17f3b81e6025eafcd25777787b4f..cf9b8b66c3f73bb69e4142ef560071e14f5a306c
--- a/react/src/App.jsx
+++ b/react/src/App.jsx
@@ -1,11 +1,17 @@
 import { useCallback, useEffect, useMemo, useRef, useState } from 'react';
 import html2canvas from 'html2canvas';
 import ReactMarkdown from 'react-markdown';
+import HistoryPanel from '../components/HistoryPanel.jsx';
 import { ChartCard } from '../components/cards';
 
 const OPEN_STATE_KEY = 'agentwp-command-deck-open';
 const DRAFT_HISTORY_KEY = 'agentwp-draft-history';
 const MAX_DRAFT_HISTORY = 10;
+const COMMAND_HISTORY_KEY = 'agentwp-command-history';
+const COMMAND_FAVORITES_KEY = 'agentwp-command-favorites';
+const COMMAND_USAGE_KEY = 'agentwp-command-usage';
+const MAX_COMMAND_HISTORY = 50;
+const MAX_COMMAND_FAVORITES = 50;
 const COPY_FEEDBACK_MS = 2000;
 const EXPORT_FEEDBACK_MS = 2000;
 const ADMIN_TRIGGER_SELECTORS = [
@@ -326,6 +332,53 @@
   return `mailto:${parts.length ? `?${parts.join('&')}` : ''}`;
 };
 
+const createCommandId = () => `cmd-${Date.now()}-${Math.random().toString(16).slice(2)}`;
+
+const buildCommandKey = (entry) =>
+  `${entry?.raw_input || ''}::${entry?.parsed_intent || ''}`;
+
+const normalizeCommandEntry = (entry) => {
+  if (!entry || typeof entry !== 'object') {
+    return null;
+  }
+  const rawInput = typeof entry.raw_input === 'string' ? entry.raw_input.trim() : '';
+  if (!rawInput) {
+    return null;
+  }
+  const parsedIntent = typeof entry.parsed_intent === 'string' ? entry.parsed_intent : '';
+  const timestamp =
+    typeof entry.timestamp === 'string' && entry.timestamp ? entry.timestamp : new Date().toISOString();
+  const wasSuccessful = Boolean(entry.was_successful);
+  const id = typeof entry.id === 'string' && entry.id ? entry.id : createCommandId();
+  return {
+    id,
+    raw_input: rawInput,
+    parsed_intent: parsedIntent,
+    timestamp,
+    was_successful: wasSuccessful,
+  };
+};
+
+const parseStoredCommandEntries = (stored, limit) => {
+  if (!Array.isArray(stored)) {
+    return [];
+  }
+  const normalized = stored.map(normalizeCommandEntry).filter(Boolean);
+  if (limit && normalized.length > limit) {
+    return normalized.slice(0, limit);
+  }
+  return normalized;
+};
+
+const serializeCommandEntry = (entry) => {
+  const normalized = normalizeCommandEntry(entry);
+  if (!normalized) {
+    return null;
+  }
+  const { raw_input, parsed_intent, timestamp, was_successful } = normalized;
+  return { raw_input, parsed_intent, timestamp, was_successful };
+};
+
 const escapeRegExp = (value) => value.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
 
 const getHighlightTokens = (query) => {
@@ -513,6 +566,10 @@
   const [draftSubject, setDraftSubject] = useState('');
   const [draftBody, setDraftBody] = useState('');
   const [draftHistory, setDraftHistory] = useState([]);
+  const [commandHistory, setCommandHistory] = useState([]);
+  const [favoriteCommands, setFavoriteCommands] = useState([]);
+  const [commandUsage, setCommandUsage] = useState({});
+  const [lastCommandEntry, setLastCommandEntry] = useState(null);
   const [exportStatus, setExportStatus] = useState('idle');
   const [selectedPeriod, setSelectedPeriod] = useState('7d');
   const inputRef = useRef(null);
@@ -689,6 +746,57 @@
     });
   }, []);
 
+  const recordCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return null;
+    }
+    setCommandHistory((prev) => {
+      const key = buildCommandKey(normalized);
+      const filtered = prev.filter((item) => buildCommandKey(item) !== key);
+      return [normalized, ...filtered].slice(0, MAX_COMMAND_HISTORY);
+    });
+    setLastCommandEntry(normalized);
+    return normalized;
+  }, []);
+
+  const recordCommandUsage = useCallback((rawInput) => {
+    if (!rawInput) {
+      return;
+    }
+    setCommandUsage((prev) => ({
+      ...prev,
+      [rawInput]: (prev[rawInput] || 0) + 1,
+    }));
+  }, []);
+
+  const toggleFavoriteCommand = useCallback((entry) => {
+    const normalized = normalizeCommandEntry(entry);
+    if (!normalized) {
+      return;
+    }
+    setFavoriteCommands((prev) => {
+      const key = buildCommandKey(normalized);
+      const exists = prev.some((item) => buildCommandKey(item) === key);
+      if (exists) {
+        return prev.filter((item) => buildCommandKey(item) !== key);
+      }
+      return [normalized, ...prev].slice(0, MAX_COMMAND_FAVORITES);
+    });
+  }, []);
+
+  const removeHistoryEntry = useCallback((entry) => {
+    if (!entry) {
+      return;
+    }
+    setCommandHistory((prev) => prev.filter((item) => item.id !== entry.id));
+  }, []);
+
+  const clearCommandHistory = useCallback(() => {
+    setCommandHistory([]);
+    setCommandUsage({});
+  }, []);
+
   const openModal = useCallback(() => {
     if (typeof document !== 'undefined') {
       lastActiveRef.current = document.activeElement;
@@ -838,6 +946,74 @@
   }, [draftHistory]);
 
   useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const storedHistory = window.localStorage.getItem(COMMAND_HISTORY_KEY);
+      if (storedHistory) {
+        const parsedHistory = JSON.parse(storedHistory);
+        const normalized = parseStoredCommandEntries(parsedHistory, MAX_COMMAND_HISTORY);
+        if (normalized.length) {
+          setCommandHistory(normalized);
+        }
+      }
+      const storedFavorites = window.localStorage.getItem(COMMAND_FAVORITES_KEY);
+      if (storedFavorites) {
+        const parsedFavorites = JSON.parse(storedFavorites);
+        const normalized = parseStoredCommandEntries(parsedFavorites, MAX_COMMAND_FAVORITES);
+        if (normalized.length) {
+          setFavoriteCommands(normalized);
+        }
+      }
+      const storedUsage = window.localStorage.getItem(COMMAND_USAGE_KEY);
+      if (storedUsage) {
+        const parsedUsage = JSON.parse(storedUsage);
+        if (parsedUsage && typeof parsedUsage === 'object' && !Array.isArray(parsedUsage)) {
+          setCommandUsage(parsedUsage);
+        }
+      }
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, []);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = commandHistory.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_HISTORY_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandHistory]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      const payload = favoriteCommands.map(serializeCommandEntry).filter(Boolean);
+      window.localStorage.setItem(COMMAND_FAVORITES_KEY, JSON.stringify(payload));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [favoriteCommands]);
+
+  useEffect(() => {
+    if (typeof window === 'undefined') {
+      return;
+    }
+    try {
+      window.localStorage.setItem(COMMAND_USAGE_KEY, JSON.stringify(commandUsage));
+    } catch (error) {
+      // Ignore storage failures (private mode, strict policies).
+    }
+  }, [commandUsage]);
+
+  useEffect(() => {
     if (!isOpen) {
       return undefined;
     }
@@ -986,83 +1162,130 @@
     };
   }, []);
 
-  const handleSubmit = async (event) => {
-    event.preventDefault();
-    const trimmedPrompt = prompt.trim();
-    if (!trimmedPrompt || loading) {
-      return;
-    }
+  const submitCommand = useCallback(
+    async (rawInput) => {
+      const trimmedPrompt = typeof rawInput === 'string' ? rawInput.trim() : '';
+      if (!trimmedPrompt || loading) {
+        return;
+      }
+
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      abortActiveRequest();
+      const controller = new AbortController();
+      requestControllerRef.current = controller;
+      setLoading(true);
+      setErrorMessage('');
+      setResponse('');
+      setMetrics({ latencyMs: null, tokenCost: null });
+
+      const startTime = getNow();
+      const commandTimestamp = new Date().toISOString();
 
-    setIsTypeaheadOpen(false);
-    setActiveSuggestionIndex(-1);
-    abortActiveRequest();
-    const controller = new AbortController();
-    requestControllerRef.current = controller;
-    setLoading(true);
-    setErrorMessage('');
-    setResponse('');
-    setMetrics({ latencyMs: null, tokenCost: null });
+      try {
+        const headers = {
+          'Content-Type': 'application/json',
+        };
+        const restEndpoint = getRestEndpoint();
+        const restNonce = getRestNonce();
+        if (restNonce) {
+          headers['X-WP-Nonce'] = restNonce;
+        }
 
-    const startTime = getNow();
+        const response = await fetch(restEndpoint, {
+          method: 'POST',
+          headers,
+          body: JSON.stringify({ prompt: trimmedPrompt }),
+          credentials: 'same-origin',
+          signal: controller.signal,
+        });
 
-    try {
-      const headers = {
-        'Content-Type': 'application/json',
-      };
-      const restEndpoint = getRestEndpoint();
-      const restNonce = getRestNonce();
-      if (restNonce) {
-        headers['X-WP-Nonce'] = restNonce;
-      }
+        const data = await response.json().catch(() => null);
+        const latencyMs = Math.round(getNow() - startTime);
 
-      const response = await fetch(restEndpoint, {
-        method: 'POST',
-        headers,
-        body: JSON.stringify({ prompt: trimmedPrompt }),
-        credentials: 'same-origin',
-        signal: controller.signal,
-      });
+        if (!response.ok || data?.success === false) {
+          const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
+          throw new Error(errorMessage);
+        }
 
-      const data = await response.json().catch(() => null);
-      const latencyMs = Math.round(getNow() - startTime);
+        const message =
+          data?.data?.message ||
+          data?.message ||
+          'Intent received. AgentWP is preparing the next step.';
+        const tokenCost = data?.data?.token_cost ?? null;
+        const subjectLine = trimmedPrompt || 'AgentWP Draft';
+        const plainTextDraft = stripMarkdownToPlainText(message);
+        const parsedIntent =
+          typeof data?.data?.intent === 'string'
+            ? data.data.intent
+            : typeof data?.data?.parsed_intent === 'string'
+              ? data.data.parsed_intent
+              : '';
 
-      if (!response.ok || data?.success === false) {
-        const errorMessage = data?.error?.message || data?.message || 'Unable to reach AgentWP.';
-        throw new Error(errorMessage);
+        setResponse(message);
+        setDraftSubject(subjectLine);
+        setDraftBody(plainTextDraft);
+        setMetrics({ latencyMs, tokenCost });
+        addDraftToHistory({
+          prompt: trimmedPrompt,
+          subject: subjectLine,
+          markdown: message,
+          plainText: plainTextDraft,
+        });
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: parsedIntent,
+          timestamp: commandTimestamp,
+          was_successful: true,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } catch (error) {
+        if (error?.name === 'AbortError') {
+          return;
+        }
+        const latencyMs = Math.round(getNow() - startTime);
+        setErrorMessage(error?.message || 'Unable to reach AgentWP.');
+        setMetrics((prev) => ({ ...prev, latencyMs }));
+        recordCommand({
+          raw_input: trimmedPrompt,
+          parsed_intent: '',
+          timestamp: commandTimestamp,
+          was_successful: false,
+        });
+        recordCommandUsage(trimmedPrompt);
+      } finally {
+        if (requestControllerRef.current === controller) {
+          requestControllerRef.current = null;
+        }
+        setLoading(false);
       }
+    },
+    [abortActiveRequest, addDraftToHistory, loading, recordCommand, recordCommandUsage]
+  );
 
-      const message =
-        data?.data?.message ||
-        data?.message ||
-        'Intent received. AgentWP is preparing the next step.';
-      const tokenCost = data?.data?.token_cost ?? null;
-      const subjectLine = trimmedPrompt || 'AgentWP Draft';
-      const plainTextDraft = stripMarkdownToPlainText(message);
+  const handleSubmit = useCallback(
+    (event) => {
+      event.preventDefault();
+      submitCommand(prompt);
+    },
+    [prompt, submitCommand]
+  );
 
-      setResponse(message);
-      setDraftSubject(subjectLine);
-      setDraftBody(plainTextDraft);
-      setMetrics({ latencyMs, tokenCost });
-      addDraftToHistory({
-        prompt: trimmedPrompt,
-        subject: subjectLine,
-        markdown: message,
-        plainText: plainTextDraft,
-      });
-    } catch (error) {
-      if (error?.name === 'AbortError') {
+  const executeCommand = useCallback(
+    (rawInput) => {
+      const nextInput = typeof rawInput === 'string' ? rawInput : '';
+      if (!nextInput.trim()) {
         return;
       }
-      const latencyMs = Math.round(getNow() - startTime);
-      setErrorMessage(error?.message || 'Unable to reach AgentWP.');
-      setMetrics((prev) => ({ ...prev, latencyMs }));
-    } finally {
-      if (requestControllerRef.current === controller) {
-        requestControllerRef.current = null;
-      }
-      setLoading(false);
-    }
-  };
+      suppressSearchRef.current = true;
+      setPrompt(nextInput);
+      setIsTypeaheadOpen(false);
+      setActiveSuggestionIndex(-1);
+      inputRef.current?.focus();
+      submitCommand(nextInput);
+    },
+    [submitCommand]
+  );
 
   const handleExportChart = useCallback(async () => {
     if (!chartRef.current || exportStatus === 'exporting') {
@@ -1093,9 +1316,38 @@
     }
   }, [exportStatus]);
 
+  const favoriteCommandKeys = useMemo(
+    () => new Set(favoriteCommands.map((entry) => buildCommandKey(entry))),
+    [favoriteCommands]
+  );
+  const visibleHistory = useMemo(
+    () => commandHistory.filter((entry) => !favoriteCommandKeys.has(buildCommandKey(entry))),
+    [commandHistory, favoriteCommandKeys]
+  );
+  const mostUsedCommands = useMemo(() => {
+    const entries = Object.entries(commandUsage || {});
+    if (!entries.length) {
+      return [];
+    }
+    return entries
+      .filter(([rawInput]) => rawInput)
+      .sort((a, b) => b[1] - a[1])
+      .slice(0, 5)
+      .map(([raw_input, count]) => ({ raw_input, count }));
+  }, [commandUsage]);
+  const isCommandFavorited = useCallback(
+    (entry) => favoriteCommandKeys.has(buildCommandKey(entry)),
+    [favoriteCommandKeys]
+  );
+  const lastSuccessfulCommand =
+    lastCommandEntry && lastCommandEntry.was_successful ? lastCommandEntry : null;
+  const isLastCommandFavorited = lastSuccessfulCommand
+    ? favoriteCommandKeys.has(buildCommandKey(lastSuccessfulCommand))
+    : false;
   const hasDraft = Boolean(response && !errorMessage);
   const resolvedBody = draftBody || stripMarkdownToPlainText(response);
   const mailtoHref = hasDraft ? buildMailtoLink(draftSubject, resolvedBody) : '#';
+  const showHistoryPanel = isPromptFocused && !prompt.trim();
   const showTypeahead =
     isTypeaheadOpen &&
     isPromptFocused &&
@@ -1551,12 +1803,54 @@
               </form>
 
               <div className="rounded-2xl border border-slate-800/80 bg-slate-950/40 px-4 py-4">
+                {!showHistoryPanel && (
+                  <div className="mb-3 flex flex-wrap items-center justify-between gap-3">
+                    <p className="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
+                      Latest response
+                    </p>
+                    {hasDraft && lastSuccessfulCommand ? (
+                      <button
+                        type="button"
+                        onClick={() => toggleFavoriteCommand(lastSuccessfulCommand)}
+                        aria-pressed={isLastCommandFavorited}
+                        className={`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold uppercase tracking-widest transition focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${
+                          isLastCommandFavorited
+                            ? 'border-amber-400/70 bg-amber-500/10 text-amber-200'
+                            : 'border-slate-700/70 text-slate-200 hover:border-slate-500/80 hover:text-white'
+                        }`}
+                      >
+                        <svg viewBox="0 0 24 24" aria-hidden="true" className="h-4 w-4">
+                          <path
+                            d="M12 3.4l2.4 4.9 5.4.8-3.9 3.8.9 5.3-4.8-2.5-4.8 2.5.9-5.3-3.9-3.8 5.4-.8L12 3.4z"
+                            fill={isLastCommandFavorited ? 'currentColor' : 'none'}
+                            stroke="currentColor"
+                            strokeWidth="1.6"
+                            strokeLinejoin="round"
+                          />
+                        </svg>
+                        {isLastCommandFavorited ? 'Starred' : 'Star'}
+                      </button>
+                    ) : null}
+                  </div>
+                )}
                 <div
                   className="min-h-[140px] max-h-64 overflow-y-auto pr-1"
                   aria-live="polite"
                   aria-busy={loading ? 'true' : 'false'}
                 >
-                  {loading ? (
+                  {showHistoryPanel ? (
+                    <HistoryPanel
+                      history={visibleHistory}
+                      historyCount={commandHistory.length}
+                      favorites={favoriteCommands}
+                      mostUsed={mostUsedCommands}
+                      onRun={executeCommand}
+                      onDelete={removeHistoryEntry}
+                      onToggleFavorite={toggleFavoriteCommand}
+                      onClearHistory={clearCommandHistory}
+                      isFavorited={isCommandFavorited}
+                    />
+                  ) : loading ? (
                     <div className="space-y-3 animate-pulse">
                       <div className="h-3 w-3/4 rounded-full bg-slate-700/60" />
                       <div className="h-3 w-5/6 rounded-full bg-slate-700/50" />
diff --git a/src/API/HistoryController.php b/src/API/HistoryController.php
new file mode 100644
index 0000000000000000000000000000000000000000..138aae7256350f0be8a540aec6b79c8284f84c0b
--- /dev/null
+++ b/src/API/HistoryController.php
@@ -0,0 +1,176 @@
+<?php
+/**
+ * History REST controller.
+ *
+ * @package AgentWP
+ */
+
+namespace AgentWP\API;
+
+use WP_REST_Server;
+
+class HistoryController extends RestController {
+	const HISTORY_META_KEY   = 'agentwp_command_history';
+	const FAVORITES_META_KEY = 'agentwp_command_favorites';
+	const HISTORY_LIMIT      = 50;
+	const FAVORITES_LIMIT    = 50;
+
+	/**
+	 * Register REST routes.
+	 *
+	 * @return void
+	 */
+	public function register_routes() {
+		register_rest_route(
+			$this->namespace,
+			'/history',
+			array(
+				array(
+					'methods'             => WP_REST_Server::READABLE,
+					'callback'            => array( $this, 'get_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+				array(
+					'methods'             => WP_REST_Server::EDITABLE,
+					'callback'            => array( $this, 'update_history' ),
+					'permission_callback' => array( $this, 'permissions_check' ),
+				),
+			)
+		);
+	}
+
+	/**
+	 * Return stored history and favorites.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function get_history( $request ) {
+		$user_id  = get_current_user_id();
+		$history  = get_user_meta( $user_id, self::HISTORY_META_KEY, true );
+		$favorites = get_user_meta( $user_id, self::FAVORITES_META_KEY, true );
+
+		$history   = is_array( $history ) ? $history : array();
+		$favorites = is_array( $favorites ) ? $favorites : array();
+
+		return $this->response_success(
+			array(
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Store updated history payload.
+	 *
+	 * @param \WP_REST_Request $request Request instance.
+	 * @return \WP_REST_Response
+	 */
+	public function update_history( $request ) {
+		$validation = $this->validate_request( $request, $this->get_history_schema() );
+		if ( is_wp_error( $validation ) ) {
+			return $this->response_error( 'agentwp_invalid_request', $validation->get_error_message(), 400 );
+		}
+
+		$payload   = $request->get_json_params();
+		$payload   = is_array( $payload ) ? $payload : array();
+		$history   = isset( $payload['history'] ) ? $payload['history'] : array();
+		$favorites = isset( $payload['favorites'] ) ? $payload['favorites'] : array();
+
+		$history   = $this->sanitize_entries( $history, self::HISTORY_LIMIT );
+		$favorites = $this->sanitize_entries( $favorites, self::FAVORITES_LIMIT );
+
+		$user_id = get_current_user_id();
+		update_user_meta( $user_id, self::HISTORY_META_KEY, $history );
+		update_user_meta( $user_id, self::FAVORITES_META_KEY, $favorites );
+
+		return $this->response_success(
+			array(
+				'updated'   => true,
+				'history'   => $history,
+				'favorites' => $favorites,
+			)
+		);
+	}
+
+	/**
+	 * Schema for history payload.
+	 *
+	 * @return array
+	 */
+	private function get_history_schema() {
+		$entry_schema = array(
+			'type'       => 'object',
+			'properties' => array(
+				'raw_input'      => array(
+					'type' => 'string',
+				),
+				'parsed_intent'  => array(
+					'type' => 'string',
+				),
+				'timestamp'      => array(
+					'type' => 'string',
+				),
+				'was_successful' => array(
+					'type' => 'boolean',
+				),
+			),
+		);
+
+		return array(
+			'type'       => 'object',
+			'properties' => array(
+				'history'   => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+				'favorites' => array(
+					'type'  => 'array',
+					'items' => $entry_schema,
+				),
+			),
+		);
+	}
+
+	/**
+	 * Normalize stored entries.
+	 *
+	 * @param array $entries History entries.
+	 * @param int   $limit Max entries to store.
+	 * @return array
+	 */
+	private function sanitize_entries( $entries, $limit ) {
+		$entries    = is_array( $entries ) ? $entries : array();
+		$normalized = array();
+
+		foreach ( $entries as $entry ) {
+			if ( ! is_array( $entry ) ) {
+				continue;
+			}
+
+			$raw_input = isset( $entry['raw_input'] ) ? sanitize_text_field( wp_unslash( $entry['raw_input'] ) ) : '';
+			if ( '' === $raw_input ) {
+				continue;
+			}
+
+			$parsed_intent = isset( $entry['parsed_intent'] ) ? sanitize_text_field( wp_unslash( $entry['parsed_intent'] ) ) : '';
+			$timestamp     = isset( $entry['timestamp'] ) ? sanitize_text_field( wp_unslash( $entry['timestamp'] ) ) : '';
+			$timestamp     = '' !== $timestamp ? $timestamp : gmdate( 'c' );
+			$was_successful = isset( $entry['was_successful'] ) ? (bool) $entry['was_successful'] : false;
+
+			$normalized[] = array(
+				'raw_input'      => $raw_input,
+				'parsed_intent'  => $parsed_intent,
+				'timestamp'      => $timestamp,
+				'was_successful' => $was_successful,
+			);
+		}
+
+		if ( $limit > 0 && count( $normalized ) > $limit ) {
+			$normalized = array_slice( $normalized, 0, $limit );
+		}
+
+		return $normalized;
+	}
+}
diff --git a/src/Plugin.php b/src/Plugin.php
index 7b6c18273f1ad41bddf30b6343d9e938df1c54c3..afbd5e057df0bce4059624c69514f69ba22fb723
--- a/src/Plugin.php
+++ b/src/Plugin.php
@@ -207,6 +207,11 @@
 			$controller = new Rest\SearchController();
 			$controller->register_routes();
 		}
+
+		if ( class_exists( 'AgentWP\\API\\HistoryController' ) ) {
+			$controller = new API\HistoryController();
+			$controller->register_routes();
+		}
 	}
 
 	/**

tokens used
146,758
