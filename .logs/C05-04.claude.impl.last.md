The implementation is complete. Let me provide the final summary:

---

## Status: DONE

## Summary of Changes

Centralized all OpenAI configuration into `AgentWPConfig` class with filter hook support for runtime overrides. The following changes were made:

### 1. `src/Config/AgentWPConfig.php`
- Added OpenAI configuration constants:
  - `OPENAI_API_BASE_URL` - Base URL for OpenAI API
  - `OPENAI_DEFAULT_MODEL` - Default model (`gpt-4o-mini`)
  - `OPENAI_TIMEOUT_DEFAULT/MIN/MAX` - Timeout bounds (60s default, 1-300s)
  - `OPENAI_VALIDATION_TIMEOUT` - Key validation timeout (3s)
  - `OPENAI_MAX_RETRIES` - Retry limit (3)
  - `OPENAI_BASE_DELAY_MS` / `OPENAI_MAX_DELAY_MS` - Retry delays
  - `OPENAI_JITTER_FACTOR` - Jitter factor (0.25)
  - `OPENAI_RETRYABLE_CODES` - Status codes that trigger retries
- Added all new keys to the `get()` method's map for filter support

### 2. `src/AI/OpenAIClient.php`
- Now uses `AgentWPConfig::get()` for timeout, base URL, and retry configuration
- Legacy constants preserved for backward compatibility (marked as `@deprecated`)
- Stream parsing uses centralized `STREAM_*` constants

### 3. `src/Retry/ExponentialBackoffPolicy.php`
- `forOpenAI()` factory now uses centralized config with filter support

### 4. `src/Infrastructure/OpenAIKeyValidator.php`
- Uses centralized config for API base URL and validation timeout

### 5. `src/AI/AIClientFactory.php`
- Uses centralized config for fallback default model

### 6. `src/AI/Model.php`
- `normalize()` uses centralized config for default model fallback

### 7. `src/Plugin/SettingsManager.php`
- `getDefaults()` uses `AgentWPConfig::OPENAI_DEFAULT_MODEL`

### 8. `src/Providers/InfrastructureServiceProvider.php`
- AIClientFactory registration pulls model from settings first, then centralized config

## How to Verify

```bash
# Run all unit tests
composer run phpunit

# Run specific OpenAI-related tests
composer run phpunit -- --filter="OpenAI|Model|ExponentialBackoff|SettingsManager"

# Verify config values can be filtered
add_filter('agentwp_config_openai_api_base_url', fn() => 'https://custom-endpoint.com/v1');
add_filter('agentwp_config_openai_max_retries', fn() => 5);
add_filter('agentwp_config_openai_timeout_default', fn() => 120);
```

## Filter Hooks Available

All OpenAI config values can be overridden via WordPress filters:
- `agentwp_config_openai_api_base_url`
- `agentwp_config_openai_default_model`
- `agentwp_config_openai_timeout_default`
- `agentwp_config_openai_timeout_min`
- `agentwp_config_openai_timeout_max`
- `agentwp_config_openai_validation_timeout`
- `agentwp_config_openai_max_retries`
- `agentwp_config_openai_base_delay_ms`
- `agentwp_config_openai_max_delay_ms`
- `agentwp_config_openai_jitter_factor`
- `agentwp_config_openai_retryable_codes`

## Risks / Follow-ups

1. **Backward Compatibility**: Old constants in `OpenAIClient` and `OpenAIKeyValidator` are preserved but marked `@deprecated`. Consider removing in a future major version.

2. **Filter Validation**: Filters allow setting any value - consider adding validation in sensitive code paths (already done for timeout bounds).

3. **Settings Manager Fallback**: If `AgentWPConfig` is unavailable at bootstrap time (unlikely), the system will gracefully fall back to hardcoded defaults.
