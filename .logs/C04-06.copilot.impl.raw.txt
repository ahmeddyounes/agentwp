I’ll read the spec and handoff, implement the required code changes, then sanity-check locally.

I’m going to locate handler `execute_tool()` overrides under `src/Intent/Handlers`, remove the redundant ones, and then run the existing test suite to ensure behavior stays the same.

I’ll scan the whole repo for any remaining handler-level `execute_tool()` overrides or tool-mapping duplication, then remove them and run the existing test suite.

I’ll scan all intent handlers to confirm none still implement their own tool-execution logic, then remove any redundant overrides if found.

I’m going to inspect the concrete intent handlers to confirm there are no leftover per-handler tool execution overrides and then clean up any now-unused interfaces/docs.

Updating agentic handlers to rely solely on centrally-registered ToolDispatcher and removing per-handler tool executor mappings.

I’m going to refactor the remaining agentic handlers to stop registering per-handler tool executors and instead rely on the centrally-registered ToolDispatcher/ExecutableTool implementations, then update affected tests.

Updating handler unit tests for new constructor signatures and restoring Search Index constants for test compatibility.

Reverting unrelated plan/handoff/log changes and keeping only the C04-06 code/test updates.

Status: DONE

Summary of changes:
- Removed handler-specific inline tool executor wiring from `CustomerLookupHandler`, `EmailDraftHandler`, `AnalyticsQueryHandler`, and `ProductStockHandler` so they rely on the centralized `ToolDispatcher`.
- Updated `IntentServiceProvider` handler registrations to inject the shared `ToolDispatcherInterface` (and removed now-unused service injections).
- Restored backward-compat constants on `src/Search/Index.php` (`DEFAULT_LIMIT`, `BACKFILL_LIMIT`, `BACKFILL_WINDOW`) to match existing test expectations.
- Updated unit tests to construct handlers with the new constructor signatures and register the needed executable tools in `FakeToolDispatcher` where required.

How to verify (exact commands):
- `./vendor/bin/phpunit --no-coverage`

Risks / follow-ups:
- Minor risk: any external code instantiating these handlers directly (outside DI) must update to the new constructor signatures.
- PHPUnit emits deprecation notices for `IntentClassifier`; unrelated to this task.



Total usage est:       1 Premium request
Total duration (API):  6m 23.364s
Total duration (wall): 6m 44.44s
Total code changes:    0 lines added, 0 lines removed
Usage by model:
    gpt-5.2              587.2k input, 21.5k output, 455.9k cache read (Est. 1 Premium request)
