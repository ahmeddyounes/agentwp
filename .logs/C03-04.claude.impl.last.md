---

**Status: DONE**

**Summary of changes:**

Modified `src/Providers/IntentServiceProvider.php`:

1. Added imports for `FunctionRegistry` and `HandlerRegistry` (lines 28-29)
2. Added `registerFunctionRegistry()` and `registerHandlerRegistry()` calls in the `register()` method (lines 46-47)
3. Added `registerFunctionRegistry()` method (lines 106-120) - registers `FunctionRegistry` as a singleton
4. Added `registerHandlerRegistry()` method (lines 122-136) - registers `HandlerRegistry` as a singleton
5. Updated `registerEngine()` method (lines 138-164) to inject all 6 dependencies:
   - `$handlers` - from container tagged 'intent.handler'
   - `FunctionRegistry` - now injected from container (was `null`)
   - `ContextBuilderInterface` - unchanged
   - `IntentClassifierInterface` - unchanged
   - `MemoryStoreInterface` - unchanged
   - `HandlerRegistry` - now injected from container (was not passed)

**How to verify:**

```bash
# Syntax check
php -l src/Providers/IntentServiceProvider.php

# Run integration test (if test environment available)
./vendor/bin/phpunit tests/Integration/Intent/EngineTest.php
```

The `/intent` endpoint at `IntentController:69` calls `$this->resolveRequired( Engine::class, 'Intent engine' )` which retrieves the container-wired `Engine` singleton with all dependencies injected via the updated `IntentServiceProvider`.

**Risks / follow-ups:**

- None identified. The changes are backwards compatible - the Engine constructor still has default values for all parameters, but in production wiring via the provider, all dependencies are now explicitly injected.
- If `FunctionRegistry` or `HandlerRegistry` classes don't exist (which would be unusual given they're in the same package), the registration methods will skip registration gracefully, matching the existing pattern for other dependencies.
