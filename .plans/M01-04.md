# M01-04 â€” REST API Framework

Build the REST API infrastructure in PHP: 1) Create AgentWP\API\RestController base class extending WP_REST_Controller with common auth, validation, and response formatting. 2) Register namespace 'agentwp/v1'. 3) Implement permission callbacks using current_user_can('manage_woocommerce'). 4) Create rate limiter using transients: 60 requests/minute per user, return 429 with Retry-After header when exceeded. 5) Endpoints to create: POST /intent (main AI endpoint), GET/POST /settings, GET /usage, GET /health. 6) Request validation with JSON schemas. 7) Standardized response format: {success: bool, data: any, error?: {code: string, message: string}}. 8) Add request logging for debugging (stored in transients, auto-expire 24h). Acceptance Criteria: All endpoints require authentication, rate limiter triggers at 61st request within 60 seconds, invalid requests return descriptive errors with correct HTTP codes, OpenAPI/Swagger spec generated.
