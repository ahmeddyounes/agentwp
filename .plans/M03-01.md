# M03-01 â€” Email Context Builder

Build context aggregation for email drafting: 1) Create AgentWP\Context\EmailContextBuilder class. 2) For given order_id, gather: order details (items, totals, dates), customer info (name, email, order history count, total spent), shipping info (method, tracking number if available, estimated delivery), payment info (method, last 4 digits if card), recent order notes (last 5). 3) Integrate with popular tracking plugins: WooCommerce Shipment Tracking, AfterShip, ShipStation (check if active, fetch tracking URL). 4) Detect order issues: payment failed, backordered items, delayed shipping (created >3 days ago, not shipped). 5) Return structured context object for AI prompt construction. Acceptance Criteria: Context loads within 300ms for single order, tracking info retrieved when plugins active, issue detection flags common problems, handles orders with 50+ line items.
