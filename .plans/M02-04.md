# M02-04 — Order Status Updates

Implement order status change functionality: 1) Create AgentWP\Handlers\OrderStatusHandler class. 2) OpenAI function schema: prepare_status_update(order_id: int, new_status: string, note?: string, notify_customer?: bool). 3) Valid statuses from wc_get_order_statuses(): pending, processing, on-hold, completed, cancelled, refunded, failed. 4) Draft-Confirm protocol: return preview showing current_status → new_status with warning for irreversible changes (cancelled, refunded). 5) Support bulk updates: prepare_bulk_status_update(order_ids: int[], new_status: string). 6) Add order note with '[AgentWP]' prefix for audit trail. 7) Trigger WooCommerce status change hooks for email notifications. Acceptance Criteria: Status only changes after confirmation, customer notification respects notify_customer flag, bulk updates handle up to 50 orders, invalid status transitions rejected with explanation.
