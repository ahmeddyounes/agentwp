# M04-06 â€” Shadow DOM Encapsulation

Isolate Command Deck CSS using Shadow DOM: 1) Mount React app inside Shadow DOM container attached to #agentwp-root. 2) Inject TailwindCSS (scoped build) into shadow root. 3) Handle font loading: embed critical fonts as base64 or use system font stack. 4) Ensure hotkey listener works outside shadow DOM. 5) Portal modals (confirmation dialogs) to shadow root. 6) Test against 10 popular themes: Storefront, Astra, OceanWP, Flatsome, Divi, Avada, GeneratePress, Neve, Kadence, flavor of the month. 7) Test against admin customization plugins: White Label CMS, Admin Menu Editor. 8) Prevent !important overrides from themes leaking in. Acceptance Criteria: No visual differences across tested themes, no CSS leaking from plugin to theme or vice versa, all interactive elements remain functional, modal focus trap works correctly.
