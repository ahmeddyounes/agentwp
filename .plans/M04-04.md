# M04-04 â€” Token Cost Tracking

Implement OpenAI usage and cost tracking: 1) AgentWP\Billing\UsageTracker class. 2) Log each API call: model, input_tokens, output_tokens, timestamp, intent_type. 3) Store in custom DB table (exception to no-custom-tables rule for analytics only). 4) Calculate costs using current OpenAI pricing: gpt-4o input/output, gpt-4o-mini input/output. 5) REST endpoint GET /agentwp/v1/usage?period=day|week|month. 6) Return: total_tokens, total_cost_usd, breakdown_by_intent, daily_trend. 7) Status Bar component showing: session tokens used, session cost, account-wide monthly total. 8) Warning when approaching user-defined budget threshold. 9) Settings option to set monthly budget limit with notification. Acceptance Criteria: Token counts match OpenAI dashboard within 5%, costs calculated accurately, budget warnings trigger at 80% and 100%, usage data queryable for last 90 days.
