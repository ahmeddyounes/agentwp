# M03-02 â€” AI Email Drafting Engine

Implement AI-powered email draft generation: 1) Create AgentWP\Handlers\EmailDraftHandler class. 2) OpenAI function schema: draft_email(order_id: int, intent: string, tone: 'professional'|'friendly'|'apologetic', custom_instructions?: string). 3) Intent types: shipping_update, refund_confirmation, order_issue, general_inquiry, review_request. 4) Build dynamic prompts incorporating EmailContextBuilder output. 5) Response includes: subject_line, email_body (HTML with simple formatting), plain_text_version. 6) Store drafts in transient with 30-minute expiry, allow retrieval/editing. 7) Support template variables: {{customer_name}}, {{order_id}}, {{tracking_url}}, etc. Acceptance Criteria: Generated emails are contextually relevant (mention specific products, tracking info), tone clearly different between options, drafts valid HTML, no placeholder text like '[TRACKING URL]' when data available.
