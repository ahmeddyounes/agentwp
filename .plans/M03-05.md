# M03-05 â€” Customer LTV Calculator

Implement customer lifetime value calculation: 1) Create AgentWP\Handlers\CustomerHandler class. 2) OpenAI function schema: get_customer_profile(email?: string, customer_id?: int). 3) Calculate and return: total_orders, total_spent, average_order_value, first_order_date, last_order_date, days_since_last_order, favorite_products (most purchased), favorite_categories, estimated_ltv (simple projection based on order frequency and AOV). 4) Customer health indicators: 'active' (ordered in last 60 days), 'at_risk' (61-180 days), 'churned' (180+ days). 5) Return recent_orders summary (last 5). 6) Handle guest customers by email lookup. Acceptance Criteria: LTV calculation documented and reproducible, handles customers with 500+ orders, guest lookup works by billing email, health status thresholds configurable via filter.
