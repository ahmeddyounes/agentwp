# Handoff: M06-02

Created: 2026-01-07T11:26:52.942617Z

Spec: .plans/M06-02.md


## 2026-01-07T11:46:26.384680Z — codex — impl

Command:
```
codex exec --color never --full-auto --output-last-message /Users/ahmedyounis/Documents/Projects/agentwp/.logs/M06-02.codex.impl.last.md -
```

Return code: 0

Agent final message (file: M06-02.codex.impl.last.md):

Status: DONE

Summary of changes
- Added demo-mode backend plumbing (settings flag, demo API key handling, watermark/payment disabling, daily reset cron) plus seed/reset/CLI tooling in `src/Demo/*.php`, with demo key usage in `src/Handlers/EmailDraftHandler.php`.
- Added demo automation scripts and compose setup (`scripts/demo-setup.sh`, `scripts/demo-reset.sh`, `docker-compose.demo.yml`) and documentation in `docs/DEMO.md` plus README link.
- Implemented demo badge + Shepherd guided tour (5 steps) in `react/src/App.jsx`, with Shepherd dependency and styling in `react/package.json` and `react/src/index.css`.

How to verify
- `docker compose -f docker-compose.demo.yml up -d --build`
- `docker compose -f docker-compose.demo.yml exec wordpress wp cron event list --path=/var/www/html --allow-root | rg agentwp_demo_daily_reset`
- `docker compose -f docker-compose.demo.yml exec wordpress wp agentwp demo reset --path=/var/www/html --allow-root`

Risks / follow-ups
- React assets are not rebuilt here; run the React build pipeline to refresh `assets/agentwp-admin.js` if you ship compiled assets.
- Demo reset is destructive (orders/products/customers/comments); keep it scoped to demo environments only.
- WP-Cron needs traffic; if disabled, use a system cron with `scripts/demo-reset.sh`.

Repo snapshot:
```
branch: main

status:
M .t2/state.json
 M README.md
 M react/package.json
 M react/src/App.jsx
 M react/src/index.css
 M src/Handlers/EmailDraftHandler.php
 M src/Plugin.php
 M src/Rest/SettingsController.php
?? .logs/M06-01.gitcommit.txt
?? .logs/M06-02.codex.impl.last.md
?? .logs/M06-02.codex.impl.raw.txt
?? .plans/M06-02.md
?? .t2/handoff/M06-02.md
?? docker-compose.demo.yml
?? docs/DEMO.md
?? scripts/demo-reset.sh
?? scripts/demo-setup.sh
?? src/Demo/

diff --stat:
.t2/state.json                     |   5 +-
 README.md                          |   1 +
 react/package.json                 |   3 +-
 react/src/App.jsx                  | 190 +++++++++++++++++++++++++++++++++++--
 react/src/index.css                |  41 ++++++++
 src/Handlers/EmailDraftHandler.php |   8 ++
 src/Plugin.php                     |  18 ++++
 src/Rest/SettingsController.php    |   7 ++
 8 files changed, 263 insertions(+), 10 deletions(-)

```
